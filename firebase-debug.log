[debug] [2025-08-05T20:50:29.265Z] ----------------------------------------------------------------------
[debug] [2025-08-05T20:50:29.269Z] Command:       C:\Program Files\nodejs\node.exe C:\Users\ASUS\AppData\Roaming\npm\node_modules\firebase-tools\lib\bin\firebase.js deploy --only functions
[debug] [2025-08-05T20:50:29.270Z] CLI Version:   14.11.2
[debug] [2025-08-05T20:50:29.270Z] Platform:      win32
[debug] [2025-08-05T20:50:29.270Z] Node Version:  v22.13.1
[debug] [2025-08-05T20:50:29.271Z] Time:          Wed Aug 06 2025 02:20:29 GMT+0530 (India Standard Time)
[debug] [2025-08-05T20:50:29.271Z] ----------------------------------------------------------------------
[debug] 
[debug] [2025-08-05T20:50:29.548Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-08-05T20:50:29.549Z] > authorizing via signed-in user (drnitinmishraderma@gmail.com)
[debug] [2025-08-05T20:50:29.549Z] [iam] checking project doctor-app-98244 for permissions ["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]
[debug] [2025-08-05T20:50:29.552Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:29.552Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:29.553Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions [none]
[debug] [2025-08-05T20:50:29.554Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions x-goog-quota-user=projects/doctor-app-98244
[debug] [2025-08-05T20:50:29.554Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-08-05T20:50:31.196Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions 200
[debug] [2025-08-05T20:50:31.197Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions {"permissions":["cloudfunctions.functions.create","cloudfunctions.functions.delete","cloudfunctions.functions.get","cloudfunctions.functions.list","cloudfunctions.functions.update","cloudfunctions.operations.get","firebase.projects.get"]}
[debug] [2025-08-05T20:50:31.197Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:31.197Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:31.197Z] >>> [apiv2][query] POST https://iam.googleapis.com/v1/projects/doctor-app-98244/serviceAccounts/doctor-app-98244@appspot.gserviceaccount.com:testIamPermissions [none]
[debug] [2025-08-05T20:50:31.197Z] >>> [apiv2][body] POST https://iam.googleapis.com/v1/projects/doctor-app-98244/serviceAccounts/doctor-app-98244@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[debug] [2025-08-05T20:50:33.085Z] <<< [apiv2][status] POST https://iam.googleapis.com/v1/projects/doctor-app-98244/serviceAccounts/doctor-app-98244@appspot.gserviceaccount.com:testIamPermissions 200
[debug] [2025-08-05T20:50:33.085Z] <<< [apiv2][body] POST https://iam.googleapis.com/v1/projects/doctor-app-98244/serviceAccounts/doctor-app-98244@appspot.gserviceaccount.com:testIamPermissions {"permissions":["iam.serviceAccounts.actAs"]}
[info] 
[info] === Deploying to 'doctor-app-98244'...
[info] 
[info] i  deploying functions 
[info] Running command: npm --prefix "$RESOURCE_DIR" run build
[info] +  functions: Finished running predeploy script. 
[debug] [2025-08-05T20:50:40.067Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:40.067Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:40.068Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudresourcemanager.googleapis.com [none]
[debug] [2025-08-05T20:50:40.068Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudresourcemanager.googleapis.com x-goog-quota-user=projects/doctor-app-98244
[debug] [2025-08-05T20:50:42.161Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudresourcemanager.googleapis.com 200
[debug] [2025-08-05T20:50:42.162Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudresourcemanager.googleapis.com [omitted]
[debug] [2025-08-05T20:50:42.171Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:42.171Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:42.171Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244 [none]
[debug] [2025-08-05T20:50:43.798Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244 200
[debug] [2025-08-05T20:50:43.798Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244 {"projectNumber":"650977025157","projectId":"doctor-app-98244","lifecycleState":"ACTIVE","name":"Doctor-App","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-07-15T12:45:33.789282Z"}
[info] i  functions: preparing codebase default for deployment 
[info] i  functions: ensuring required API cloudfunctions.googleapis.com is enabled... 
[debug] [2025-08-05T20:50:43.801Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:43.801Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:43.801Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:43.801Z] Checked if tokens are valid: true, expires at: 1754430602596
[info] i  functions: ensuring required API cloudbuild.googleapis.com is enabled... 
[debug] [2025-08-05T20:50:43.802Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:43.802Z] Checked if tokens are valid: true, expires at: 1754430602596
[info] i  artifactregistry: ensuring required API artifactregistry.googleapis.com is enabled... 
[debug] [2025-08-05T20:50:43.803Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:43.803Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:43.804Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudfunctions.googleapis.com [none]
[debug] [2025-08-05T20:50:43.804Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudfunctions.googleapis.com x-goog-quota-user=projects/doctor-app-98244
[debug] [2025-08-05T20:50:43.805Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/runtimeconfig.googleapis.com [none]
[debug] [2025-08-05T20:50:43.805Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/runtimeconfig.googleapis.com x-goog-quota-user=projects/doctor-app-98244
[debug] [2025-08-05T20:50:43.807Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudbuild.googleapis.com [none]
[debug] [2025-08-05T20:50:43.808Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudbuild.googleapis.com x-goog-quota-user=projects/doctor-app-98244
[debug] [2025-08-05T20:50:43.811Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/artifactregistry.googleapis.com [none]
[debug] [2025-08-05T20:50:43.811Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/artifactregistry.googleapis.com x-goog-quota-user=projects/doctor-app-98244
[debug] [2025-08-05T20:50:44.258Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudfunctions.googleapis.com 200
[debug] [2025-08-05T20:50:44.258Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudfunctions.googleapis.com [omitted]
[info] +  functions: required API cloudfunctions.googleapis.com is enabled 
[debug] [2025-08-05T20:50:45.712Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/runtimeconfig.googleapis.com 200
[debug] [2025-08-05T20:50:45.712Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/runtimeconfig.googleapis.com [omitted]
[debug] [2025-08-05T20:50:45.724Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudbuild.googleapis.com 200
[debug] [2025-08-05T20:50:45.724Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/cloudbuild.googleapis.com [omitted]
[info] +  functions: required API cloudbuild.googleapis.com is enabled 
[debug] [2025-08-05T20:50:45.731Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/artifactregistry.googleapis.com 200
[debug] [2025-08-05T20:50:45.731Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/artifactregistry.googleapis.com [omitted]
[info] +  artifactregistry: required API artifactregistry.googleapis.com is enabled 
[debug] [2025-08-05T20:50:45.736Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:45.737Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:45.737Z] >>> [apiv2][query] GET https://firebase.googleapis.com/v1beta1/projects/doctor-app-98244/adminSdkConfig [none]
[debug] [2025-08-05T20:50:47.099Z] <<< [apiv2][status] GET https://firebase.googleapis.com/v1beta1/projects/doctor-app-98244/adminSdkConfig 200
[debug] [2025-08-05T20:50:47.100Z] <<< [apiv2][body] GET https://firebase.googleapis.com/v1beta1/projects/doctor-app-98244/adminSdkConfig {"projectId":"doctor-app-98244","storageBucket":"doctor-app-98244.firebasestorage.app"}
[debug] [2025-08-05T20:50:47.100Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:47.100Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:47.101Z] >>> [apiv2][query] GET https://runtimeconfig.googleapis.com/v1beta1/projects/doctor-app-98244/configs [none]
[debug] [2025-08-05T20:50:48.023Z] <<< [apiv2][status] GET https://runtimeconfig.googleapis.com/v1beta1/projects/doctor-app-98244/configs 200
[debug] [2025-08-05T20:50:48.024Z] <<< [apiv2][body] GET https://runtimeconfig.googleapis.com/v1beta1/projects/doctor-app-98244/configs {}
[debug] [2025-08-05T20:50:48.025Z] Validating nodejs source
[warn] !  functions: Runtime Node.js 18 was deprecated on 2025-04-30 and will be decommissioned on 2025-10-30, after which you will not be able to deploy without upgrading. Consider upgrading now to avoid disruption. See https://cloud.google.com/functions/docs/runtime-support for full details on the lifecycle policy 
[debug] [2025-08-05T20:50:49.511Z] > [functions] package.json contents: {
  "name": "functions",
  "description": "Cloud Functions for Firebase",
  "scripts": {
    "build": "tsc",
    "serve": "npm run build && firebase emulators:start --only functions",
    "deploy": "npm run build && firebase deploy --only functions",
    "lint": "eslint .",
    "test": "npm run build && mocha --reporter spec",
    "start": "functions-framework --target=api"
  },
  "engines": {
    "node": "18"
  },
  "main": "lib/index.js",
  "dependencies": {
    "@google-cloud/functions-framework": "^4.0.0",
    "agora-access-token": "^2.0.2",
    "cors": "^2.8.5",
    "dotenv": "^17.2.0",
    "express": "^5.1.0",
    "firebase-admin": "^13.4.0",
    "firebase-functions": "^6.4.0"
  },
  "devDependencies": {
    "eslint": "^8.56.0",
    "eslint-config-google": "^0.14.0",
    "mocha": "^10.2.0",
    "typescript": "^5.4.5"
  },
  "private": true
}
[debug] [2025-08-05T20:50:49.512Z] Building nodejs source
[info] i  functions: Loading and analyzing source code for codebase default to determine what to deploy 
[debug] [2025-08-05T20:50:49.514Z] Could not find functions.yaml. Must use http discovery
[debug] [2025-08-05T20:50:49.532Z] Found firebase-functions binary at 'C:\Users\ASUS\Desktop\Practo_Doctor\node_modules\.bin\firebase-functions'
[info] Serving at port 8498

[info] [dotenv@17.2.1] injecting env (0) from .env -- tip: ⚙️  enable debug logging with { debug: true }

[error] (node:2360) [DEP0040] DeprecationWarning: The `punycode` module is deprecated. Please use a userland alternative instead.
(Use `node --trace-deprecation ...` to show where the warning was created)

[debug] [2025-08-05T20:50:51.618Z] Got response from /__/functions.yaml {"endpoints":{"api":{"availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"concurrency":null,"serviceAccountEmail":null,"vpc":null,"platform":"gcfv2","labels":{},"httpsTrigger":{},"entryPoint":"api"},"cleanupExpiredActiveChats":{"platform":"gcfv1","availableMemoryMb":null,"timeoutSeconds":null,"minInstances":null,"maxInstances":null,"ingressSettings":null,"serviceAccountEmail":null,"vpc":null,"scheduleTrigger":{"schedule":"every 5 minutes","retryConfig":{"retryCount":null,"maxDoublings":null,"maxRetryDuration":null,"maxBackoffDuration":null,"minBackoffDuration":null},"timeZone":"Asia/Kolkata"},"labels":{},"entryPoint":"cleanupExpiredActiveChats"}},"specVersion":"v1alpha1","requiredAPIs":[{"api":"cloudscheduler.googleapis.com","reason":"Needed for scheduled functions."}],"extensions":{}}
[info] i  extensions: ensuring required API firebaseextensions.googleapis.com is enabled... 
[debug] [2025-08-05T20:50:55.693Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:55.694Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:55.694Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/firebaseextensions.googleapis.com [none]
[debug] [2025-08-05T20:50:55.694Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/firebaseextensions.googleapis.com x-goog-quota-user=projects/doctor-app-98244
[debug] [2025-08-05T20:50:57.918Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/firebaseextensions.googleapis.com 200
[debug] [2025-08-05T20:50:57.918Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/doctor-app-98244/services/firebaseextensions.googleapis.com [omitted]
[info] +  extensions: required API firebaseextensions.googleapis.com is enabled 
[debug] [2025-08-05T20:50:57.923Z] > command requires scopes: ["email","openid","https://www.googleapis.com/auth/cloudplatformprojects.readonly","https://www.googleapis.com/auth/firebase","https://www.googleapis.com/auth/cloud-platform"]
[debug] [2025-08-05T20:50:57.924Z] > authorizing via signed-in user (drnitinmishraderma@gmail.com)
[debug] [2025-08-05T20:50:57.924Z] [iam] checking project doctor-app-98244 for permissions ["firebase.projects.get","firebaseextensions.instances.list"]
[debug] [2025-08-05T20:50:57.924Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:57.924Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:57.924Z] >>> [apiv2][query] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions [none]
[debug] [2025-08-05T20:50:57.924Z] >>> [apiv2][(partial)header] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions x-goog-quota-user=projects/doctor-app-98244
[debug] [2025-08-05T20:50:57.924Z] >>> [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-08-05T20:50:59.753Z] <<< [apiv2][status] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions 200
[debug] [2025-08-05T20:50:59.753Z] <<< [apiv2][body] POST https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244:testIamPermissions {"permissions":["firebase.projects.get","firebaseextensions.instances.list"]}
[debug] [2025-08-05T20:50:59.754Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:59.754Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:50:59.755Z] >>> [apiv2][query] GET https://firebaseextensions.googleapis.com/v1beta/projects/doctor-app-98244/instances pageSize=100&pageToken=
[debug] [2025-08-05T20:51:01.918Z] <<< [apiv2][status] GET https://firebaseextensions.googleapis.com/v1beta/projects/doctor-app-98244/instances 200
[debug] [2025-08-05T20:51:01.918Z] <<< [apiv2][body] GET https://firebaseextensions.googleapis.com/v1beta/projects/doctor-app-98244/instances {}
[info] i  functions: preparing functions directory for uploading... 
[info] i  functions: packaged C:\Users\ASUS\Desktop\Practo_Doctor\functions (72.93 KB) for uploading 
[info] i  functions: packaged C:\Users\ASUS\Desktop\Practo_Doctor\functions (73.14 KB) for uploading 
[debug] [2025-08-05T20:51:02.031Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:02.031Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:02.031Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/-/functions [none]
[debug] [2025-08-05T20:51:03.260Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/-/functions 200
[debug] [2025-08-05T20:51:03.260Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/-/functions {}
[debug] [2025-08-05T20:51:03.260Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:03.261Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:03.261Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/-/functions filter=environment%3D%22GEN_2%22
[debug] [2025-08-05T20:51:05.122Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/-/functions 200
[debug] [2025-08-05T20:51:05.122Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/-/functions {"functions":[{"name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"build":"projects/650977025157/locations/us-central1/builds/e849e38e-67c9-43cb-8bb2-75588e68b1aa","runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"maxInstanceCount":20,"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","updateTime":"2025-07-16T16:22:53.069227882Z","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"4ad4c859c75eaa19ac91c62bc3e793bab08151c7"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","createTime":"2025-07-16T09:42:58.984716539Z","satisfiesPzi":true}]}
[info] i  functions: ensuring required API cloudscheduler.googleapis.com is enabled... 
[debug] [2025-08-05T20:51:05.127Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:05.127Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:05.127Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/cloudscheduler.googleapis.com [none]
[debug] [2025-08-05T20:51:05.127Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/cloudscheduler.googleapis.com x-goog-quota-user=projects/650977025157
[debug] [2025-08-05T20:51:07.293Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/cloudscheduler.googleapis.com 200
[debug] [2025-08-05T20:51:07.294Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/cloudscheduler.googleapis.com [omitted]
[warn] !  functions: missing required API cloudscheduler.googleapis.com. Enabling now... 
[debug] [2025-08-05T20:51:07.295Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:07.295Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:07.296Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1/projects/650977025157/services/cloudscheduler.googleapis.com:enable [none]
[debug] [2025-08-05T20:51:07.296Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1/projects/650977025157/services/cloudscheduler.googleapis.com:enable x-goog-quota-user=projects/650977025157
[debug] [2025-08-05T20:51:07.876Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1/projects/650977025157/services/cloudscheduler.googleapis.com:enable 200
[debug] [2025-08-05T20:51:07.876Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1/projects/650977025157/services/cloudscheduler.googleapis.com:enable [omitted]
[info] i  functions: ensuring required API run.googleapis.com is enabled... 
[debug] [2025-08-05T20:51:17.910Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:17.910Z] Checked if tokens are valid: true, expires at: 1754430602596
[info] i  functions: ensuring required API eventarc.googleapis.com is enabled... 
[debug] [2025-08-05T20:51:17.911Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:17.911Z] Checked if tokens are valid: true, expires at: 1754430602596
[info] i  functions: ensuring required API pubsub.googleapis.com is enabled... 
[debug] [2025-08-05T20:51:17.912Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:17.912Z] Checked if tokens are valid: true, expires at: 1754430602596
[info] i  functions: ensuring required API storage.googleapis.com is enabled... 
[debug] [2025-08-05T20:51:17.912Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:17.913Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:17.913Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/run.googleapis.com [none]
[debug] [2025-08-05T20:51:17.913Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/run.googleapis.com x-goog-quota-user=projects/650977025157
[debug] [2025-08-05T20:51:17.915Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/eventarc.googleapis.com [none]
[debug] [2025-08-05T20:51:17.915Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/eventarc.googleapis.com x-goog-quota-user=projects/650977025157
[debug] [2025-08-05T20:51:17.917Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/pubsub.googleapis.com [none]
[debug] [2025-08-05T20:51:17.917Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/pubsub.googleapis.com x-goog-quota-user=projects/650977025157
[debug] [2025-08-05T20:51:17.919Z] >>> [apiv2][query] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/storage.googleapis.com [none]
[debug] [2025-08-05T20:51:17.919Z] >>> [apiv2][(partial)header] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/storage.googleapis.com x-goog-quota-user=projects/650977025157
[debug] [2025-08-05T20:51:20.085Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/run.googleapis.com 200
[debug] [2025-08-05T20:51:20.085Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/run.googleapis.com [omitted]
[info] +  functions: required API run.googleapis.com is enabled 
[debug] [2025-08-05T20:51:20.155Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/pubsub.googleapis.com 200
[debug] [2025-08-05T20:51:20.155Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/pubsub.googleapis.com [omitted]
[info] +  functions: required API pubsub.googleapis.com is enabled 
[debug] [2025-08-05T20:51:20.176Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/storage.googleapis.com 200
[debug] [2025-08-05T20:51:20.176Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/storage.googleapis.com [omitted]
[info] +  functions: required API storage.googleapis.com is enabled 
[debug] [2025-08-05T20:51:20.196Z] <<< [apiv2][status] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/eventarc.googleapis.com 200
[debug] [2025-08-05T20:51:20.196Z] <<< [apiv2][body] GET https://serviceusage.googleapis.com/v1/projects/650977025157/services/eventarc.googleapis.com [omitted]
[info] +  functions: required API eventarc.googleapis.com is enabled 
[info] i  functions: generating the service identity for pubsub.googleapis.com... 
[debug] [2025-08-05T20:51:20.209Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:20.210Z] Checked if tokens are valid: true, expires at: 1754430602596
[info] i  functions: generating the service identity for eventarc.googleapis.com... 
[debug] [2025-08-05T20:51:20.210Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:20.210Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:20.210Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/pubsub.googleapis.com:generateServiceIdentity [none]
[debug] [2025-08-05T20:51:20.210Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/pubsub.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/650977025157
[debug] [2025-08-05T20:51:20.210Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/pubsub.googleapis.com:generateServiceIdentity {}
[debug] [2025-08-05T20:51:20.211Z] >>> [apiv2][query] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/eventarc.googleapis.com:generateServiceIdentity [none]
[debug] [2025-08-05T20:51:20.211Z] >>> [apiv2][(partial)header] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/eventarc.googleapis.com:generateServiceIdentity x-goog-quota-user=projects/650977025157
[debug] [2025-08-05T20:51:20.211Z] >>> [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/eventarc.googleapis.com:generateServiceIdentity {}
[debug] [2025-08-05T20:51:20.846Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/pubsub.googleapis.com:generateServiceIdentity 200
[debug] [2025-08-05T20:51:20.846Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/pubsub.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-650977025157@gcp-sa-pubsub.iam.gserviceaccount.com","uniqueId":"112714907407113598684"}}
[debug] [2025-08-05T20:51:20.962Z] <<< [apiv2][status] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/eventarc.googleapis.com:generateServiceIdentity 200
[debug] [2025-08-05T20:51:20.964Z] <<< [apiv2][body] POST https://serviceusage.googleapis.com/v1beta1/projects/650977025157/services/eventarc.googleapis.com:generateServiceIdentity {"name":"operations/finished.DONE_OPERATION","done":true,"response":{"@type":"type.googleapis.com/google.api.serviceusage.v1beta1.ServiceIdentity","email":"service-650977025157@gcp-sa-eventarc.iam.gserviceaccount.com","uniqueId":"110208706057595230296"}}
[debug] [2025-08-05T20:51:20.969Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:20.969Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:20.969Z] >>> [apiv2][query] GET https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244 [none]
[debug] [2025-08-05T20:51:22.853Z] <<< [apiv2][status] GET https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244 200
[debug] [2025-08-05T20:51:22.853Z] <<< [apiv2][body] GET https://cloudresourcemanager.googleapis.com/v1/projects/doctor-app-98244 {"projectNumber":"650977025157","projectId":"doctor-app-98244","lifecycleState":"ACTIVE","name":"Doctor-App","labels":{"firebase":"enabled","firebase-core":"disabled"},"createTime":"2025-07-15T12:45:33.789282Z"}
[debug] [2025-08-05T20:51:22.853Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:22.853Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:22.854Z] >>> [apiv2][query] GET https://compute.googleapis.com/compute/v1/projects/650977025157 [none]
[debug] [2025-08-05T20:51:23.630Z] <<< [apiv2][status] GET https://compute.googleapis.com/compute/v1/projects/650977025157 403
[debug] [2025-08-05T20:51:23.630Z] <<< [apiv2][body] GET https://compute.googleapis.com/compute/v1/projects/650977025157 {"error":{"code":403,"message":"Compute Engine API has not been used in project 650977025157 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 650977025157 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/650977025157","service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157","serviceTitle":"Compute Engine API","containerInfo":"650977025157"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 650977025157 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157"}]}]}}
[debug] [2025-08-05T20:51:23.631Z] unable to look up default compute service account. Falling back to 650977025157-compute@developer.gserviceaccount.com. Error: {"name":"FirebaseError","children":[],"context":{"body":{"error":{"code":403,"message":"Compute Engine API has not been used in project 650977025157 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","errors":[{"message":"Compute Engine API has not been used in project 650977025157 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","domain":"usageLimits","reason":"accessNotConfigured","extendedHelp":"https://console.developers.google.com"}],"status":"PERMISSION_DENIED","details":[{"@type":"type.googleapis.com/google.rpc.ErrorInfo","reason":"SERVICE_DISABLED","domain":"googleapis.com","metadata":{"consumer":"projects/650977025157","service":"compute.googleapis.com","activationUrl":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157","serviceTitle":"Compute Engine API","containerInfo":"650977025157"}},{"@type":"type.googleapis.com/google.rpc.LocalizedMessage","locale":"en-US","message":"Compute Engine API has not been used in project 650977025157 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry."},{"@type":"type.googleapis.com/google.rpc.Help","links":[{"description":"Google developers console API activation","url":"https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157"}]}]}},"response":{"statusCode":403}},"exit":1,"message":"Request to https://compute.googleapis.com/compute/v1/projects/650977025157 had HTTP Error: 403, Compute Engine API has not been used in project 650977025157 before or it is disabled. Enable it by visiting https://console.developers.google.com/apis/api/compute.googleapis.com/overview?project=650977025157 then retry. If you enabled this API recently, wait a few minutes for the action to propagate to our systems and retry.","status":403}
[debug] [2025-08-05T20:51:23.632Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:23.632Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:23.633Z] >>> [apiv2][query] GET https://cloudbilling.googleapis.com/v1/projects/doctor-app-98244/billingInfo [none]
[debug] [2025-08-05T20:51:25.422Z] <<< [apiv2][status] GET https://cloudbilling.googleapis.com/v1/projects/doctor-app-98244/billingInfo 200
[debug] [2025-08-05T20:51:25.422Z] <<< [apiv2][body] GET https://cloudbilling.googleapis.com/v1/projects/doctor-app-98244/billingInfo {"name":"projects/doctor-app-98244/billingInfo","projectId":"doctor-app-98244","billingAccountName":"billingAccounts/01384D-F3802D-EB29CE","billingEnabled":true}
[debug] [2025-08-05T20:51:25.424Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:25.425Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:25.425Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:25.425Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:25.425Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-08-05T20:51:25.425Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/functions:generateUploadUrl {}
[debug] [2025-08-05T20:51:25.426Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/functions:generateUploadUrl [none]
[debug] [2025-08-05T20:51:26.668Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-08-05T20:51:26.668Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D"}
[debug] [2025-08-05T20:51:26.669Z] >>> [apiv2][query] PUT https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip GoogleAccessId=service-650977025157%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D
[debug] [2025-08-05T20:51:26.669Z] >>> [apiv2][body] PUT https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip [stream]
[debug] [2025-08-05T20:51:27.389Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/functions:generateUploadUrl 200
[debug] [2025-08-05T20:51:27.390Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/functions:generateUploadUrl {"uploadUrl":"https://storage.googleapis.com/gcf-v2-uploads-650977025157.us-central1.cloudfunctions.appspot.com/6229e790-5787-4aba-b57e-0e12d8d69e7b.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428886&Signature=diKzsBNxFT6E75mDcJdn0%2FM5s8XntwjqFNc7Qgk0ACCt0UmcuI%2FuwFaWdMsLQLDGQsddqpb2kco4i0vinwsIEK%2BTOO%2BQVJ7TEmOTrzZtKCjCrElKXtIdEEnn2mpMH8EoZbmf1mHoNURhPqCQgBmGUulHn0AWt0bxm9FsxWR4Le8TdNrkY4PAzM75%2F6PfX%2FHwvBOcxcVoAd%2BP%2BuFKZzaEbCxsn6qUp13gTVUcVCSslkgMVQC%2BsZhswMyeVBBLcj%2FwyLEPtwRPHZVZIGjZGgoo75eY0vKqmnUCZ7Tij47HuoV1lT7jE5mSI6MfPlizsVyiGSJd6oz3x8vNtYqqRfkEzA%3D%3D","storageSource":{"bucket":"gcf-v2-uploads-650977025157.us-central1.cloudfunctions.appspot.com","object":"6229e790-5787-4aba-b57e-0e12d8d69e7b.zip"}}
[debug] [2025-08-05T20:51:27.391Z] >>> [apiv2][query] PUT https://storage.googleapis.com/gcf-v2-uploads-650977025157.us-central1.cloudfunctions.appspot.com/6229e790-5787-4aba-b57e-0e12d8d69e7b.zip GoogleAccessId=service-650977025157%40gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428886&Signature=diKzsBNxFT6E75mDcJdn0%2FM5s8XntwjqFNc7Qgk0ACCt0UmcuI%2FuwFaWdMsLQLDGQsddqpb2kco4i0vinwsIEK%2BTOO%2BQVJ7TEmOTrzZtKCjCrElKXtIdEEnn2mpMH8EoZbmf1mHoNURhPqCQgBmGUulHn0AWt0bxm9FsxWR4Le8TdNrkY4PAzM75%2F6PfX%2FHwvBOcxcVoAd%2BP%2BuFKZzaEbCxsn6qUp13gTVUcVCSslkgMVQC%2BsZhswMyeVBBLcj%2FwyLEPtwRPHZVZIGjZGgoo75eY0vKqmnUCZ7Tij47HuoV1lT7jE5mSI6MfPlizsVyiGSJd6oz3x8vNtYqqRfkEzA%3D%3D
[debug] [2025-08-05T20:51:27.391Z] >>> [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-650977025157.us-central1.cloudfunctions.appspot.com/6229e790-5787-4aba-b57e-0e12d8d69e7b.zip [stream]
[debug] [2025-08-05T20:51:29.750Z] <<< [apiv2][status] PUT https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip 200
[debug] [2025-08-05T20:51:29.750Z] <<< [apiv2][body] PUT https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip [omitted]
[debug] [2025-08-05T20:51:31.414Z] <<< [apiv2][status] PUT https://storage.googleapis.com/gcf-v2-uploads-650977025157.us-central1.cloudfunctions.appspot.com/6229e790-5787-4aba-b57e-0e12d8d69e7b.zip 200
[debug] [2025-08-05T20:51:31.414Z] <<< [apiv2][body] PUT https://storage.googleapis.com/gcf-v2-uploads-650977025157.us-central1.cloudfunctions.appspot.com/6229e790-5787-4aba-b57e-0e12d8d69e7b.zip [omitted]
[info] +  functions: functions folder uploaded successfully 
[info] i  functions: creating Node.js 18 (1st Gen) function cleanupExpiredActiveChats(us-central1)... 
[info] i  functions: updating Node.js 18 (2nd Gen) function api(us-central1)... 
[debug] [2025-08-05T20:51:31.422Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:31.422Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:31.423Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:31.423Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:31.423Z] >>> [apiv2][query] POST https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/functions [none]
[debug] [2025-08-05T20:51:31.423Z] >>> [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/functions {"name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","entryPoint":"cleanupExpiredActiveChats","runtime":"nodejs18","dockerRegistry":"ARTIFACT_REGISTRY","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1"},"minInstances":null,"maxInstances":null,"ingressSettings":null,"environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"serviceAccountEmail":null,"availableMemoryMb":null,"timeout":null,"vpcConnector":null,"vpcConnectorEgressSettings":null,"buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}}
[debug] [2025-08-05T20:51:31.424Z] >>> [apiv2][query] PATCH https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/functions/api updateMask=name%2CbuildConfig.runtime%2CbuildConfig.entryPoint%2CbuildConfig.source.storageSource.bucket%2CbuildConfig.source.storageSource.object%2CbuildConfig.environmentVariables%2CbuildConfig.sourceToken%2CserviceConfig.environmentVariables%2CserviceConfig.ingressSettings%2CserviceConfig.timeoutSeconds%2CserviceConfig.serviceAccountEmail%2CserviceConfig.availableMemory%2CserviceConfig.minInstanceCount%2CserviceConfig.maxInstanceCount%2CserviceConfig.maxInstanceRequestConcurrency%2CserviceConfig.availableCpu%2CserviceConfig.vpcConnector%2CserviceConfig.vpcConnectorEgressSettings%2Clabels
[debug] [2025-08-05T20:51:31.424Z] >>> [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/functions/api {"name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-uploads-650977025157.us-central1.cloudfunctions.appspot.com","object":"6229e790-5787-4aba-b57e-0e12d8d69e7b.zip"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""}},"serviceConfig":{"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":null,"timeoutSeconds":null,"serviceAccountEmail":null,"availableMemory":"256Mi","minInstanceCount":null,"maxInstanceCount":null,"maxInstanceRequestConcurrency":80,"availableCpu":"1","vpcConnector":null,"vpcConnectorEgressSettings":null},"labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"}}
[debug] [2025-08-05T20:51:32.460Z] <<< [apiv2][status] POST https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/functions 200
[debug] [2025-08-05T20:51:32.460Z] <<< [apiv2][body] POST https://cloudfunctions.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/functions {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","updateTime":"2025-08-05T20:51:31.211768825Z"}}
[debug] [2025-08-05T20:51:32.460Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:32.461Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:32.461Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:51:32.920Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:51:32.920Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","updateTime":"2025-08-05T20:51:31.211768825Z"}}
[debug] [2025-08-05T20:51:33.421Z] [create-default-us-central1-cleanupExpiredActiveChats] Retrying task index 0
[debug] [2025-08-05T20:51:33.421Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:33.422Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:33.422Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:51:33.906Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:51:33.906Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1","failurePolicy":{}},"entryPoint":"cleanupExpiredActiveChats","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"runtime":"nodejs18","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-08-05T20:51:31.211768825Z"}}
[debug] [2025-08-05T20:51:33.956Z] <<< [apiv2][status] PATCH https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/functions/api 200
[debug] [2025-08-05T20:51:33.956Z] <<< [apiv2][body] PATCH https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/functions/api {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2"},"done":false}
[debug] [2025-08-05T20:51:33.956Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:33.957Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:33.957Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:51:34.918Z] [create-default-us-central1-cleanupExpiredActiveChats] Retrying task index 0
[debug] [2025-08-05T20:51:34.918Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:34.918Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:34.918Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:51:35.302Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:51:35.302Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1","failurePolicy":{}},"entryPoint":"cleanupExpiredActiveChats","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"runtime":"nodejs18","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-08-05T20:51:31.211768825Z"}}
[debug] [2025-08-05T20:51:35.418Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:51:35.419Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c"},"done":false}
[debug] [2025-08-05T20:51:35.923Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-08-05T20:51:35.923Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:35.923Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:35.923Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:51:37.294Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:51:37.295Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c"},"done":false}
[debug] [2025-08-05T20:51:37.313Z] [create-default-us-central1-cleanupExpiredActiveChats] Retrying task index 0
[debug] [2025-08-05T20:51:37.313Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:37.313Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:37.314Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:51:37.770Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:51:37.770Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1","failurePolicy":{}},"entryPoint":"cleanupExpiredActiveChats","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"runtime":"nodejs18","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-08-05T20:51:31.211768825Z","buildId":"cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99","buildName":"projects/650977025157/locations/us-central1/builds/cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99"}}
[debug] [2025-08-05T20:51:38.305Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-08-05T20:51:38.305Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:38.305Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:38.306Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:51:39.652Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:51:39.652Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c"},"done":false}
[debug] [2025-08-05T20:51:41.660Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-08-05T20:51:41.662Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:41.663Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:41.664Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:51:41.780Z] [create-default-us-central1-cleanupExpiredActiveChats] Retrying task index 0
[debug] [2025-08-05T20:51:41.780Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:41.780Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:41.780Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:51:42.780Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:51:42.780Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1","failurePolicy":{}},"entryPoint":"cleanupExpiredActiveChats","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"runtime":"nodejs18","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-08-05T20:51:31.211768825Z","buildId":"cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99","buildName":"projects/650977025157/locations/us-central1/builds/cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99"}}
[debug] [2025-08-05T20:51:43.029Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:51:43.029Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c"},"done":false}
[debug] [2025-08-05T20:51:47.035Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-08-05T20:51:47.035Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:47.036Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:47.036Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:51:48.406Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:51:48.406Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c"},"done":false}
[debug] [2025-08-05T20:51:50.789Z] [create-default-us-central1-cleanupExpiredActiveChats] Retrying task index 0
[debug] [2025-08-05T20:51:50.790Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:50.790Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:50.790Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:51:51.274Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:51:51.274Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1","failurePolicy":{}},"entryPoint":"cleanupExpiredActiveChats","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"runtime":"nodejs18","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-08-05T20:51:31.211768825Z","buildId":"cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99","buildName":"projects/650977025157/locations/us-central1/builds/cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99"}}
[debug] [2025-08-05T20:51:56.419Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-08-05T20:51:56.420Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:56.420Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:51:56.420Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:51:58.063Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:51:58.063Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c"},"done":false}
[debug] [2025-08-05T20:52:01.288Z] [create-default-us-central1-cleanupExpiredActiveChats] Retrying task index 0
[debug] [2025-08-05T20:52:01.289Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:01.289Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:01.289Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:52:01.750Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:52:01.750Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1","failurePolicy":{}},"entryPoint":"cleanupExpiredActiveChats","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"runtime":"nodejs18","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-08-05T20:51:31.211768825Z","buildId":"cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99","buildName":"projects/650977025157/locations/us-central1/builds/cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99"}}
[debug] [2025-08-05T20:52:08.067Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-08-05T20:52:08.067Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:08.067Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:08.068Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:52:09.780Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:52:09.780Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c"},"done":false}
[debug] [2025-08-05T20:52:11.758Z] [create-default-us-central1-cleanupExpiredActiveChats] Retrying task index 0
[debug] [2025-08-05T20:52:11.759Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:11.759Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:11.759Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:52:12.219Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:52:12.219Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1","failurePolicy":{}},"entryPoint":"cleanupExpiredActiveChats","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"runtime":"nodejs18","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-08-05T20:51:31.211768825Z","buildId":"cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99","buildName":"projects/650977025157/locations/us-central1/builds/cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99"}}
[debug] [2025-08-05T20:52:19.789Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-08-05T20:52:19.790Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:19.790Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:19.790Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:52:22.056Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:52:22.056Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"BUILD","message":"Build in progress","state":"IN_PROGRESS","resource":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c","resourceUri":"https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157"},{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION","buildName":"projects/650977025157/locations/us-central1/builds/7769c2b6-63db-431a-b031-580c54391d1c"},"done":false}
[debug] [2025-08-05T20:52:22.219Z] [create-default-us-central1-cleanupExpiredActiveChats] Retrying task index 0
[debug] [2025-08-05T20:52:22.220Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:22.220Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:22.220Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 [none]
[debug] [2025-08-05T20:52:22.787Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 200
[debug] [2025-08-05T20:52:22.787Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v1/operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2 {"name":"operations/cHJvamVjdHMvZG9jdG9yLWFwcC05ODI0NC9sb2NhdGlvbnMvdXMtY2VudHJhbDEvb3BlcmF0aW9ucy9vcGVyYXRpb24tMTc1NDQyNzA5MDY3MS02M2JhNDYzODYxNzY4LWVkYWVlNzg1LTJlNTRhZGY2","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v1.OperationMetadataV1","target":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","type":"CREATE_FUNCTION","request":{"@type":"type.googleapis.com/google.cloud.functions.v1.CloudFunction","name":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats","eventTrigger":{"eventType":"google.pubsub.topic.publish","resource":"projects/doctor-app-98244/topics/firebase-schedule-cleanupExpiredActiveChats-us-central1","failurePolicy":{}},"entryPoint":"cleanupExpiredActiveChats","updateTime":"1970-01-01T00:00:00Z","labels":{"deployment-tool":"cli-firebase","deployment-scheduled":"true","firebase-functions-hash":"2995a34319023d582e3ec7ab67adf31d23e68ccc"},"sourceUploadUrl":"https://storage.googleapis.com/uploads-538554437249.us-central1.cloudfunctions.appspot.com/be0ef44d-cf03-44f3-8fce-9cba56c87690.zip?GoogleAccessId=service-650977025157@gcf-admin-robot.iam.gserviceaccount.com&Expires=1754428885&Signature=vjnn9FIvQJb3dXBuQjED6XB9XVijCAXnvEhOfM28SWZ9su8mZh5Zn3YK7SDK8hJurwE1hsumN68OjJv80SoXhmcobesWZpZ%2FrC4H5ZsJCz7X9NWpC5utZalb4%2BXi7HtkdqtIHXxLgZHUfvvFrx6RoqUbXKL7hUon6V%2Fn00d4LtmVbwzQO2X%2BguMeQ8y%2BJJ8l6hnPcBA2zIdq1AVZfiSy7v76kJuIVU9Ig18a4fVEhAFnGVH1xPVrNbGlP9DgKtr4LgsyO8I%2FRE%2F3oDPXJe%2BsQM9LeM5fNCrVFD0krP5M4vxxdAjdaYz8UXmAX%2F30Px3JxHFJ5dX%2B5NT3bKC4Q4zeZA%3D%3D","environmentVariables":{"FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"},"runtime":"nodejs18","buildEnvironmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRegistry":"ARTIFACT_REGISTRY"},"versionId":"1","updateTime":"2025-08-05T20:52:16.099972295Z","buildId":"cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99","buildName":"projects/650977025157/locations/us-central1/builds/cda5e492-bfd9-4a0d-ad8a-0bcfb75f2f99"},"done":true,"error":{"code":3,"message":"Gen1 operation for function projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats failed: Build failed: npm warn EBADENGINE Unsupported engine {\nnpm warn EBADENGINE   package: '@firebase/util@1.13.0',\nnpm warn EBADENGINE   required: { node: '>=20.0.0' },\nnpm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }\nnpm warn EBADENGINE }\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: @google-cloud/functions-framework@4.0.0 from lock file\nnpm error Missing: agora-access-token@2.0.4 from lock file\nnpm error Missing: dotenv@17.2.1 from lock file\nnpm error Missing: eslint@8.57.1 from lock file\nnpm error Missing: eslint-config-google@0.14.0 from lock file\nnpm error Invalid: lock file's express@4.21.2 does not satisfy express@5.1.0\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@13.4.0\nnpm error Missing: mocha@10.8.2 from lock file\nnpm error Missing: cloudevents@8.0.3 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: minimist@1.2.8 from lock file\nnpm error Missing: read-package-up@11.0.0 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: crc-32@1.2.0 from lock file\nnpm error Missing: cuint@0.2.2 from lock file\nnpm error Missing: ajv@8.17.1 from lock file\nnpm error Missing: ajv-formats@2.1.1 from lock file\nnpm error Missing: process@0.11.10 from lock file\nnpm error Missing: util@0.12.5 from lock file\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: fast-uri@3.0.6 from lock file\nnpm error Missing: json-schema-traverse@1.0.0 from lock file\nnpm error Missing: require-from-string@2.0.2 from lock file\nnpm error Missing: exit-on-epipe@1.0.1 from lock file\nnpm error Missing: printj@1.1.2 from lock file\nnpm error Missing: @eslint-community/eslint-utils@4.7.0 from lock file\nnpm error Missing: @eslint-community/regexpp@4.12.1 from lock file\nnpm error Missing: @eslint/eslintrc@2.1.4 from lock file\nnpm error Missing: @eslint/js@8.57.1 from lock file\nnpm error Missing: @humanwhocodes/config-array@0.13.0 from lock file\nnpm error Missing: @humanwhocodes/module-importer@1.0.1 from lock file\nnpm error Missing: @nodelib/fs.walk@1.2.8 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: doctrine@3.0.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: eslint-scope@7.2.2 from lock file\nnpm error Missing: eslint-visitor-keys@3.4.3 from lock file\nnpm error Missing: espree@9.6.1 from lock file\nnpm error Missing: esquery@1.6.0 from lock file\nnpm error Missing: esutils@2.0.3 from lock file\nnpm error Missing: file-entry-cache@6.0.1 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob-parent@6.0.2 from lock file\nnpm error Missing: globals@13.24.0 from lock file\nnpm error Missing: graphemer@1.4.0 from lock file\nnpm error Missing: ignore@5.3.2 from lock file\nnpm error Missing: is-glob@4.0.3 from lock file\nnpm error Missing: is-path-inside@3.0.3 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: json-stable-stringify-without-jsonify@1.0.1 from lock file\nnpm error Missing: levn@0.4.1 from lock file\nnpm error Missing: lodash.merge@4.6.2 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: optionator@0.9.4 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: text-table@0.2.0 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: import-fresh@3.3.1 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @humanwhocodes/object-schema@2.0.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @nodelib/fs.scandir@2.1.5 from lock file\nnpm error Missing: fastq@1.19.1 from lock file\nnpm error Missing: @nodelib/fs.stat@2.0.5 from lock file\nnpm error Missing: run-parallel@1.2.0 from lock file\nnpm error Missing: esrecurse@4.3.0 from lock file\nnpm error Missing: estraverse@5.3.0 from lock file\nnpm error Missing: acorn@8.15.0 from lock file\nnpm error Missing: acorn-jsx@5.3.2 from lock file\nnpm error Invalid: lock file's accepts@1.3.8 does not satisfy accepts@2.0.0\nnpm error Missing: body-parser@2.2.0 from lock file\nnpm error Invalid: lock file's content-disposition@0.5.4 does not satisfy content-disposition@1.0.0\nnpm error Invalid: lock file's cookie-signature@1.0.6 does not satisfy cookie-signature@1.2.2\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's finalhandler@1.3.1 does not satisfy finalhandler@2.1.0\nnpm error Invalid: lock file's fresh@0.5.2 does not satisfy fresh@2.0.0\nnpm error Invalid: lock file's merge-descriptors@1.0.3 does not satisfy merge-descriptors@2.0.0\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: qs@6.14.0 from lock file\nnpm error Missing: router@2.2.0 from lock file\nnpm error Invalid: lock file's send@0.19.0 does not satisfy send@1.2.0\nnpm error Invalid: lock file's serve-static@1.16.2 does not satisfy serve-static@2.2.0\nnpm error Missing: type-is@2.0.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Invalid: lock file's negotiator@0.6.3 does not satisfy negotiator@1.0.0\nnpm error Missing: reusify@1.1.0 from lock file\nnpm error Missing: flat-cache@3.2.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@2.0.11\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@1.0.16\nnpm error Missing: uuid@11.1.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.6.18\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@1.0.20\nnpm error Missing: @firebase/database-types@1.0.15 from lock file\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.4.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.12.1\nnpm error Invalid: lock file's @firebase/app-check-interop-types@0.3.2 does not satisfy @firebase/app-check-interop-types@0.3.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.2.4\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/util@1.13.0 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: flatted@3.3.3 from lock file\nnpm error Missing: keyv@4.5.4 from lock file\nnpm error Missing: rimraf@3.0.2 from lock file\nnpm error Missing: type-fest@0.20.2 from lock file\nnpm error Missing: parent-module@1.0.1 from lock file\nnpm error Missing: resolve-from@4.0.0 from lock file\nnpm error Missing: is-extglob@2.1.1 from lock file\nnpm error Missing: json-buffer@3.0.1 from lock file\nnpm error Missing: prelude-ls@1.2.1 from lock file\nnpm error Missing: type-check@0.4.0 from lock file\nnpm error Missing: ansi-colors@4.1.3 from lock file\nnpm error Missing: browser-stdout@1.3.1 from lock file\nnpm error Missing: chokidar@3.6.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: diff@5.2.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob@8.1.0 from lock file\nnpm error Missing: he@1.2.0 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: log-symbols@4.1.0 from lock file\nnpm error Missing: minimatch@5.1.6 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: serialize-javascript@6.0.2 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: workerpool@6.5.1 from lock file\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: yargs-unparser@2.0.0 from lock file\nnpm error Missing: glob-parent@5.1.2 from lock file\nnpm error Missing: is-binary-path@2.1.0 from lock file\nnpm error Missing: readdirp@3.6.0 from lock file\nnpm error Missing: binary-extensions@2.3.0 from lock file\nnpm error Missing: is-unicode-supported@0.1.0 from lock file\nnpm error Missing: deep-is@0.1.4 from lock file\nnpm error Missing: fast-levenshtein@2.0.6 from lock file\nnpm error Missing: word-wrap@1.2.5 from lock file\nnpm error Missing: find-up-simple@1.0.1 from lock file\nnpm error Missing: read-pkg@9.0.1 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: @types/normalize-package-data@2.4.4 from lock file\nnpm error Missing: normalize-package-data@6.0.2 from lock file\nnpm error Missing: parse-json@8.3.0 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: unicorn-magic@0.1.0 from lock file\nnpm error Missing: hosted-git-info@7.0.2 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: validate-npm-package-license@3.0.4 from lock file\nnpm error Missing: lru-cache@10.4.3 from lock file\nnpm error Missing: glob@7.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: is-promise@4.0.0 from lock file\nnpm error Invalid: lock file's path-to-regexp@0.1.12 does not satisfy path-to-regexp@8.2.0\nnpm error Missing: queue-microtask@1.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: randombytes@2.1.0 from lock file\nnpm error Missing: is-arguments@1.2.0 from lock file\nnpm error Missing: is-generator-function@1.1.0 from lock file\nnpm error Missing: is-typed-array@1.1.15 from lock file\nnpm error Missing: which-typed-array@1.1.19 from lock file\nnpm error Missing: safe-regex-test@1.1.0 from lock file\nnpm error Missing: is-regex@1.2.1 from lock file\nnpm error Missing: spdx-correct@3.2.0 from lock file\nnpm error Missing: spdx-expression-parse@3.0.1 from lock file\nnpm error Missing: spdx-license-ids@3.0.21 from lock file\nnpm error Missing: spdx-exceptions@2.5.0 from lock file\nnpm error Missing: available-typed-arrays@1.0.7 from lock file\nnpm error Missing: call-bind@1.0.8 from lock file\nnpm error Missing: for-each@0.3.5 from lock file\nnpm error Missing: possible-typed-array-names@1.1.0 from lock file\nnpm error Missing: set-function-length@1.2.2 from lock file\nnpm error Missing: is-callable@1.2.7 from lock file\nnpm error Missing: define-data-property@1.1.4 from lock file\nnpm error Missing: has-property-descriptors@1.0.2 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: decamelize@4.0.0 from lock file\nnpm error Missing: flat@5.0.2 from lock file\nnpm error Missing: is-plain-obj@2.1.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: uri-js@4.4.1 from lock file\nnpm error Missing: punycode@2.3.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: iconv-lite@0.6.3 from lock file\nnpm error Missing: raw-body@3.0.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: media-typer@1.1.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: index-to-position@1.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-08-05T20_51_51_697Z-debug-0.log; Error ID: 7fa33aaa."}}
[debug] [2025-08-05T20:52:22.788Z] Got source token undefined for region us-central1
[error] Gen1 operation for function projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats failed: Build failed: npm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@firebase/util@1.13.0',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
npm error code EUSAGE
npm error
npm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.
npm error
npm error Missing: @google-cloud/functions-framework@4.0.0 from lock file
npm error Missing: agora-access-token@2.0.4 from lock file
npm error Missing: dotenv@17.2.1 from lock file
npm error Missing: eslint@8.57.1 from lock file
npm error Missing: eslint-config-google@0.14.0 from lock file
npm error Invalid: lock file's express@4.21.2 does not satisfy express@5.1.0
npm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@13.4.0
npm error Missing: mocha@10.8.2 from lock file
npm error Missing: cloudevents@8.0.3 from lock file
npm error Missing: express@4.21.2 from lock file
npm error Missing: minimist@1.2.8 from lock file
npm error Missing: read-package-up@11.0.0 from lock file
npm error Missing: semver@7.7.2 from lock file
npm error Missing: crc-32@1.2.0 from lock file
npm error Missing: cuint@0.2.2 from lock file
npm error Missing: ajv@8.17.1 from lock file
npm error Missing: ajv-formats@2.1.1 from lock file
npm error Missing: process@0.11.10 from lock file
npm error Missing: util@0.12.5 from lock file
npm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2
npm error Missing: fast-uri@3.0.6 from lock file
npm error Missing: json-schema-traverse@1.0.0 from lock file
npm error Missing: require-from-string@2.0.2 from lock file
npm error Missing: exit-on-epipe@1.0.1 from lock file
npm error Missing: printj@1.1.2 from lock file
npm error Missing: @eslint-community/eslint-utils@4.7.0 from lock file
npm error Missing: @eslint-community/regexpp@4.12.1 from lock file
npm error Missing: @eslint/eslintrc@2.1.4 from lock file
npm error Missing: @eslint/js@8.57.1 from lock file
npm error Missing: @humanwhocodes/config-array@0.13.0 from lock file
npm error Missing: @humanwhocodes/module-importer@1.0.1 from lock file
npm error Missing: @nodelib/fs.walk@1.2.8 from lock file
npm error Missing: ajv@6.12.6 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: doctrine@3.0.0 from lock file
npm error Missing: escape-string-regexp@4.0.0 from lock file
npm error Missing: eslint-scope@7.2.2 from lock file
npm error Missing: eslint-visitor-keys@3.4.3 from lock file
npm error Missing: espree@9.6.1 from lock file
npm error Missing: esquery@1.6.0 from lock file
npm error Missing: esutils@2.0.3 from lock file
npm error Missing: file-entry-cache@6.0.1 from lock file
npm error Missing: find-up@5.0.0 from lock file
npm error Missing: glob-parent@6.0.2 from lock file
npm error Missing: globals@13.24.0 from lock file
npm error Missing: graphemer@1.4.0 from lock file
npm error Missing: ignore@5.3.2 from lock file
npm error Missing: is-glob@4.0.3 from lock file
npm error Missing: is-path-inside@3.0.3 from lock file
npm error Missing: js-yaml@4.1.0 from lock file
npm error Missing: json-stable-stringify-without-jsonify@1.0.1 from lock file
npm error Missing: levn@0.4.1 from lock file
npm error Missing: lodash.merge@4.6.2 from lock file
npm error Missing: minimatch@3.1.2 from lock file
npm error Missing: optionator@0.9.4 from lock file
npm error Missing: strip-ansi@6.0.1 from lock file
npm error Missing: text-table@0.2.0 from lock file
npm error Missing: ajv@6.12.6 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: import-fresh@3.3.1 from lock file
npm error Missing: js-yaml@4.1.0 from lock file
npm error Missing: minimatch@3.1.2 from lock file
npm error Missing: @humanwhocodes/object-schema@2.0.3 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: minimatch@3.1.2 from lock file
npm error Missing: @nodelib/fs.scandir@2.1.5 from lock file
npm error Missing: fastq@1.19.1 from lock file
npm error Missing: @nodelib/fs.stat@2.0.5 from lock file
npm error Missing: run-parallel@1.2.0 from lock file
npm error Missing: esrecurse@4.3.0 from lock file
npm error Missing: estraverse@5.3.0 from lock file
npm error Missing: acorn@8.15.0 from lock file
npm error Missing: acorn-jsx@5.3.2 from lock file
npm error Invalid: lock file's accepts@1.3.8 does not satisfy accepts@2.0.0
npm error Missing: body-parser@2.2.0 from lock file
npm error Invalid: lock file's content-disposition@0.5.4 does not satisfy content-disposition@1.0.0
npm error Invalid: lock file's cookie-signature@1.0.6 does not satisfy cookie-signature@1.2.2
npm error Missing: debug@4.4.1 from lock file
npm error Invalid: lock file's finalhandler@1.3.1 does not satisfy finalhandler@2.1.0
npm error Invalid: lock file's fresh@0.5.2 does not satisfy fresh@2.0.0
npm error Invalid: lock file's merge-descriptors@1.0.3 does not satisfy merge-descriptors@2.0.0
npm error Missing: mime-types@3.0.1 from lock file
npm error Missing: qs@6.14.0 from lock file
npm error Missing: router@2.2.0 from lock file
npm error Invalid: lock file's send@0.19.0 does not satisfy send@1.2.0
npm error Invalid: lock file's serve-static@1.16.2 does not satisfy serve-static@2.2.0
npm error Missing: type-is@2.0.1 from lock file
npm error Missing: mime-types@3.0.1 from lock file
npm error Invalid: lock file's negotiator@0.6.3 does not satisfy negotiator@1.0.0
npm error Missing: reusify@1.1.0 from lock file
npm error Missing: flat-cache@3.2.0 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@2.0.11
npm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@1.0.16
npm error Missing: uuid@11.1.0 from lock file
npm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.6.18
npm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@1.0.20
npm error Missing: @firebase/database-types@1.0.15 from lock file
npm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.4.4
npm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.12.1
npm error Invalid: lock file's @firebase/app-check-interop-types@0.3.2 does not satisfy @firebase/app-check-interop-types@0.3.3
npm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.2.4
npm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3
npm error Missing: @firebase/util@1.13.0 from lock file
npm error Missing: express@4.21.2 from lock file
npm error Missing: flatted@3.3.3 from lock file
npm error Missing: keyv@4.5.4 from lock file
npm error Missing: rimraf@3.0.2 from lock file
npm error Missing: type-fest@0.20.2 from lock file
npm error Missing: parent-module@1.0.1 from lock file
npm error Missing: resolve-from@4.0.0 from lock file
npm error Missing: is-extglob@2.1.1 from lock file
npm error Missing: json-buffer@3.0.1 from lock file
npm error Missing: prelude-ls@1.2.1 from lock file
npm error Missing: type-check@0.4.0 from lock file
npm error Missing: ansi-colors@4.1.3 from lock file
npm error Missing: browser-stdout@1.3.1 from lock file
npm error Missing: chokidar@3.6.0 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: diff@5.2.0 from lock file
npm error Missing: escape-string-regexp@4.0.0 from lock file
npm error Missing: find-up@5.0.0 from lock file
npm error Missing: glob@8.1.0 from lock file
npm error Missing: he@1.2.0 from lock file
npm error Missing: js-yaml@4.1.0 from lock file
npm error Missing: log-symbols@4.1.0 from lock file
npm error Missing: minimatch@5.1.6 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: serialize-javascript@6.0.2 from lock file
npm error Missing: supports-color@8.1.1 from lock file
npm error Missing: workerpool@6.5.1 from lock file
npm error Missing: yargs@16.2.0 from lock file
npm error Missing: yargs-parser@20.2.9 from lock file
npm error Missing: yargs-unparser@2.0.0 from lock file
npm error Missing: glob-parent@5.1.2 from lock file
npm error Missing: is-binary-path@2.1.0 from lock file
npm error Missing: readdirp@3.6.0 from lock file
npm error Missing: binary-extensions@2.3.0 from lock file
npm error Missing: is-unicode-supported@0.1.0 from lock file
npm error Missing: deep-is@0.1.4 from lock file
npm error Missing: fast-levenshtein@2.0.6 from lock file
npm error Missing: word-wrap@1.2.5 from lock file
npm error Missing: find-up-simple@1.0.1 from lock file
npm error Missing: read-pkg@9.0.1 from lock file
npm error Missing: type-fest@4.41.0 from lock file
npm error Missing: @types/normalize-package-data@2.4.4 from lock file
npm error Missing: normalize-package-data@6.0.2 from lock file
npm error Missing: parse-json@8.3.0 from lock file
npm error Missing: type-fest@4.41.0 from lock file
npm error Missing: unicorn-magic@0.1.0 from lock file
npm error Missing: hosted-git-info@7.0.2 from lock file
npm error Missing: semver@7.7.2 from lock file
npm error Missing: validate-npm-package-license@3.0.4 from lock file
npm error Missing: lru-cache@10.4.3 from lock file
npm error Missing: glob@7.2.3 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: is-promise@4.0.0 from lock file
npm error Invalid: lock file's path-to-regexp@0.1.12 does not satisfy path-to-regexp@8.2.0
npm error Missing: queue-microtask@1.2.3 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: mime-types@3.0.1 from lock file
npm error Missing: randombytes@2.1.0 from lock file
npm error Missing: is-arguments@1.2.0 from lock file
npm error Missing: is-generator-function@1.1.0 from lock file
npm error Missing: is-typed-array@1.1.15 from lock file
npm error Missing: which-typed-array@1.1.19 from lock file
npm error Missing: safe-regex-test@1.1.0 from lock file
npm error Missing: is-regex@1.2.1 from lock file
npm error Missing: spdx-correct@3.2.0 from lock file
npm error Missing: spdx-expression-parse@3.0.1 from lock file
npm error Missing: spdx-license-ids@3.0.21 from lock file
npm error Missing: spdx-exceptions@2.5.0 from lock file
npm error Missing: available-typed-arrays@1.0.7 from lock file
npm error Missing: call-bind@1.0.8 from lock file
npm error Missing: for-each@0.3.5 from lock file
npm error Missing: possible-typed-array-names@1.1.0 from lock file
npm error Missing: set-function-length@1.2.2 from lock file
npm error Missing: is-callable@1.2.7 from lock file
npm error Missing: define-data-property@1.1.4 from lock file
npm error Missing: has-property-descriptors@1.0.2 from lock file
npm error Missing: camelcase@6.3.0 from lock file
npm error Missing: decamelize@4.0.0 from lock file
npm error Missing: flat@5.0.2 from lock file
npm error Missing: is-plain-obj@2.1.0 from lock file
npm error Missing: json-schema-traverse@0.4.1 from lock file
npm error Missing: uri-js@4.4.1 from lock file
npm error Missing: punycode@2.3.1 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: argparse@2.0.1 from lock file
npm error Missing: brace-expansion@1.1.12 from lock file
npm error Missing: accepts@1.3.8 from lock file
npm error Missing: content-disposition@0.5.4 from lock file
npm error Missing: cookie-signature@1.0.6 from lock file
npm error Missing: finalhandler@1.3.1 from lock file
npm error Missing: fresh@0.5.2 from lock file
npm error Missing: merge-descriptors@1.0.3 from lock file
npm error Missing: path-to-regexp@0.1.12 from lock file
npm error Missing: send@0.19.0 from lock file
npm error Missing: serve-static@1.16.2 from lock file
npm error Missing: negotiator@0.6.3 from lock file
npm error Missing: encodeurl@1.0.2 from lock file
npm error Missing: mime@1.6.0 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: brace-expansion@1.1.12 from lock file
npm error Missing: mime-db@1.54.0 from lock file
npm error Missing: json-schema-traverse@0.4.1 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: locate-path@6.0.0 from lock file
npm error Missing: argparse@2.0.1 from lock file
npm error Missing: p-locate@5.0.0 from lock file
npm error Missing: brace-expansion@1.1.12 from lock file
npm error Missing: ansi-regex@5.0.1 from lock file
npm error Missing: iconv-lite@0.6.3 from lock file
npm error Missing: raw-body@3.0.0 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: mime-db@1.54.0 from lock file
npm error Missing: media-typer@1.1.0 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: accepts@1.3.8 from lock file
npm error Missing: content-disposition@0.5.4 from lock file
npm error Missing: cookie-signature@1.0.6 from lock file
npm error Missing: finalhandler@1.3.1 from lock file
npm error Missing: fresh@0.5.2 from lock file
npm error Missing: merge-descriptors@1.0.3 from lock file
npm error Missing: path-to-regexp@0.1.12 from lock file
npm error Missing: send@0.19.0 from lock file
npm error Missing: serve-static@1.16.2 from lock file
npm error Missing: negotiator@0.6.3 from lock file
npm error Missing: encodeurl@1.0.2 from lock file
npm error Missing: mime@1.6.0 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: locate-path@6.0.0 from lock file
npm error Missing: argparse@2.0.1 from lock file
npm error Missing: p-locate@5.0.0 from lock file
npm error Missing: cliui@7.0.4 from lock file
npm error Missing: string-width@4.2.3 from lock file
npm error Missing: strip-ansi@6.0.1 from lock file
npm error Missing: wrap-ansi@7.0.0 from lock file
npm error Missing: emoji-regex@8.0.0 from lock file
npm error Missing: ansi-regex@5.0.1 from lock file
npm error Missing: index-to-position@1.1.0 from lock file
npm error Missing: minimatch@3.1.2 from lock file
npm error Missing: brace-expansion@1.1.12 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: mime-db@1.54.0 from lock file
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [-ws|--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-08-05T20_51_51_697Z-debug-0.log; Error ID: 7fa33aaa.
[debug] [2025-08-05T20:52:32.060Z] [update-default-us-central1-api] Retrying task index 0
[debug] [2025-08-05T20:52:32.060Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:32.060Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:32.060Z] >>> [apiv2][query] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e [none]
[debug] [2025-08-05T20:52:33.667Z] <<< [apiv2][status] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e 200
[debug] [2025-08-05T20:52:33.667Z] <<< [apiv2][body] GET https://cloudfunctions.googleapis.com/v2/projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e {"name":"projects/doctor-app-98244/locations/us-central1/operations/operation-1754427091621-63ba46394975b-ee22ce91-5767083e","metadata":{"@type":"type.googleapis.com/google.cloud.functions.v2.OperationMetadata","createTime":"2025-08-05T20:51:32.738858194Z","endTime":"2025-08-05T20:52:29.321339164Z","target":"projects/doctor-app-98244/locations/us-central1/functions/api","verb":"update","cancelRequested":false,"apiVersion":"v2","requestResource":{"@type":"type.googleapis.com/google.cloud.functions.v2.Function","name":"projects/doctor-app-98244/locations/us-central1/functions/api","buildConfig":{"runtime":"nodejs18","entryPoint":"api","source":{"storageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1754427092693208"}},"environmentVariables":{"GOOGLE_NODE_RUN_SCRIPTS":""},"dockerRepository":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","sourceProvenance":{"resolvedStorageSource":{"bucket":"gcf-v2-sources-650977025157-us-central1","object":"api/function-source.zip","generation":"1752682911647574"}},"dockerRegistry":"ARTIFACT_REGISTRY","serviceAccount":"projects/doctor-app-98244/serviceAccounts/650977025157-compute@developer.gserviceaccount.com","automaticUpdatePolicy":{}},"serviceConfig":{"service":"projects/doctor-app-98244/locations/us-central1/services/api","timeoutSeconds":60,"environmentVariables":{"AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","NEXT_PUBLIC_AGORA_APP_ID":"eaed21b901084e5eaf7d4b9ffdcb7a97","NEXT_PUBLIC_AGORA_APP_CERTIFICATE":"b620483849a949dbbae9861376b7a414","FIREBASE_CONFIG":"{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}","GCLOUD_PROJECT":"doctor-app-98244","EVENTARC_CLOUD_EVENT_SOURCE":"projects/doctor-app-98244/locations/us-central1/services/api","FUNCTION_TARGET":"api","LOG_EXECUTION_ID":"true"},"ingressSettings":"ALLOW_ALL","uri":"https://api-j3h5t7gkqq-uc.a.run.app","serviceAccountEmail":"650977025157-compute@developer.gserviceaccount.com","availableMemory":"256Mi","allTrafficOnLatestRevision":true,"revision":"api-00002-ked","maxInstanceRequestConcurrency":80,"availableCpu":"1"},"state":"ACTIVE","labels":{"deployment-tool":"cli-firebase","firebase-functions-hash":"dd9ab8199abd43bf22815beb39cc21579bfc01b9"},"environment":"GEN_2","url":"https://us-central1-doctor-app-98244.cloudfunctions.net/api","satisfiesPzi":true},"stages":[{"name":"SERVICE","state":"NOT_STARTED"}],"operationType":"UPDATE_FUNCTION"},"done":true,"error":{"code":3,"message":"Build failed with status: FAILURE and message: npm warn EBADENGINE Unsupported engine {\nnpm warn EBADENGINE   package: '@firebase/util@1.13.0',\nnpm warn EBADENGINE   required: { node: '>=20.0.0' },\nnpm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }\nnpm warn EBADENGINE }\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: @google-cloud/functions-framework@4.0.0 from lock file\nnpm error Missing: agora-access-token@2.0.4 from lock file\nnpm error Missing: dotenv@17.2.1 from lock file\nnpm error Missing: eslint@8.57.1 from lock file\nnpm error Missing: eslint-config-google@0.14.0 from lock file\nnpm error Invalid: lock file's express@4.21.2 does not satisfy express@5.1.0\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@13.4.0\nnpm error Missing: mocha@10.8.2 from lock file\nnpm error Missing: cloudevents@8.0.3 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: minimist@1.2.8 from lock file\nnpm error Missing: read-package-up@11.0.0 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: crc-32@1.2.0 from lock file\nnpm error Missing: cuint@0.2.2 from lock file\nnpm error Missing: ajv@8.17.1 from lock file\nnpm error Missing: ajv-formats@2.1.1 from lock file\nnpm error Missing: process@0.11.10 from lock file\nnpm error Missing: util@0.12.5 from lock file\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: fast-uri@3.0.6 from lock file\nnpm error Missing: json-schema-traverse@1.0.0 from lock file\nnpm error Missing: require-from-string@2.0.2 from lock file\nnpm error Missing: exit-on-epipe@1.0.1 from lock file\nnpm error Missing: printj@1.1.2 from lock file\nnpm error Missing: @eslint-community/eslint-utils@4.7.0 from lock file\nnpm error Missing: @eslint-community/regexpp@4.12.1 from lock file\nnpm error Missing: @eslint/eslintrc@2.1.4 from lock file\nnpm error Missing: @eslint/js@8.57.1 from lock file\nnpm error Missing: @humanwhocodes/config-array@0.13.0 from lock file\nnpm error Missing: @humanwhocodes/module-importer@1.0.1 from lock file\nnpm error Missing: @nodelib/fs.walk@1.2.8 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: doctrine@3.0.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: eslint-scope@7.2.2 from lock file\nnpm error Missing: eslint-visitor-keys@3.4.3 from lock file\nnpm error Missing: espree@9.6.1 from lock file\nnpm error Missing: esquery@1.6.0 from lock file\nnpm error Missing: esutils@2.0.3 from lock file\nnpm error Missing: file-entry-cache@6.0.1 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob-parent@6.0.2 from lock file\nnpm error Missing: globals@13.24.0 from lock file\nnpm error Missing: graphemer@1.4.0 from lock file\nnpm error Missing: ignore@5.3.2 from lock file\nnpm error Missing: is-glob@4.0.3 from lock file\nnpm error Missing: is-path-inside@3.0.3 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: json-stable-stringify-without-jsonify@1.0.1 from lock file\nnpm error Missing: levn@0.4.1 from lock file\nnpm error Missing: lodash.merge@4.6.2 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: optionator@0.9.4 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: text-table@0.2.0 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: import-fresh@3.3.1 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @humanwhocodes/object-schema@2.0.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @nodelib/fs.scandir@2.1.5 from lock file\nnpm error Missing: fastq@1.19.1 from lock file\nnpm error Missing: @nodelib/fs.stat@2.0.5 from lock file\nnpm error Missing: run-parallel@1.2.0 from lock file\nnpm error Missing: esrecurse@4.3.0 from lock file\nnpm error Missing: estraverse@5.3.0 from lock file\nnpm error Missing: acorn@8.15.0 from lock file\nnpm error Missing: acorn-jsx@5.3.2 from lock file\nnpm error Invalid: lock file's accepts@1.3.8 does not satisfy accepts@2.0.0\nnpm error Missing: body-parser@2.2.0 from lock file\nnpm error Invalid: lock file's content-disposition@0.5.4 does not satisfy content-disposition@1.0.0\nnpm error Invalid: lock file's cookie-signature@1.0.6 does not satisfy cookie-signature@1.2.2\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's finalhandler@1.3.1 does not satisfy finalhandler@2.1.0\nnpm error Invalid: lock file's fresh@0.5.2 does not satisfy fresh@2.0.0\nnpm error Invalid: lock file's merge-descriptors@1.0.3 does not satisfy merge-descriptors@2.0.0\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: qs@6.14.0 from lock file\nnpm error Missing: router@2.2.0 from lock file\nnpm error Invalid: lock file's send@0.19.0 does not satisfy send@1.2.0\nnpm error Invalid: lock file's serve-static@1.16.2 does not satisfy serve-static@2.2.0\nnpm error Missing: type-is@2.0.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Invalid: lock file's negotiator@0.6.3 does not satisfy negotiator@1.0.0\nnpm error Missing: reusify@1.1.0 from lock file\nnpm error Missing: flat-cache@3.2.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@2.0.11\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@1.0.16\nnpm error Missing: uuid@11.1.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.6.18\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@1.0.20\nnpm error Missing: @firebase/database-types@1.0.15 from lock file\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.4.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.12.1\nnpm error Invalid: lock file's @firebase/app-check-interop-types@0.3.2 does not satisfy @firebase/app-check-interop-types@0.3.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.2.4\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/util@1.13.0 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: flatted@3.3.3 from lock file\nnpm error Missing: keyv@4.5.4 from lock file\nnpm error Missing: rimraf@3.0.2 from lock file\nnpm error Missing: type-fest@0.20.2 from lock file\nnpm error Missing: parent-module@1.0.1 from lock file\nnpm error Missing: resolve-from@4.0.0 from lock file\nnpm error Missing: is-extglob@2.1.1 from lock file\nnpm error Missing: json-buffer@3.0.1 from lock file\nnpm error Missing: prelude-ls@1.2.1 from lock file\nnpm error Missing: type-check@0.4.0 from lock file\nnpm error Missing: ansi-colors@4.1.3 from lock file\nnpm error Missing: browser-stdout@1.3.1 from lock file\nnpm error Missing: chokidar@3.6.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: diff@5.2.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob@8.1.0 from lock file\nnpm error Missing: he@1.2.0 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: log-symbols@4.1.0 from lock file\nnpm error Missing: minimatch@5.1.6 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: serialize-javascript@6.0.2 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: workerpool@6.5.1 from lock file\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: yargs-unparser@2.0.0 from lock file\nnpm error Missing: glob-parent@5.1.2 from lock file\nnpm error Missing: is-binary-path@2.1.0 from lock file\nnpm error Missing: readdirp@3.6.0 from lock file\nnpm error Missing: binary-extensions@2.3.0 from lock file\nnpm error Missing: is-unicode-supported@0.1.0 from lock file\nnpm error Missing: deep-is@0.1.4 from lock file\nnpm error Missing: fast-levenshtein@2.0.6 from lock file\nnpm error Missing: word-wrap@1.2.5 from lock file\nnpm error Missing: find-up-simple@1.0.1 from lock file\nnpm error Missing: read-pkg@9.0.1 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: @types/normalize-package-data@2.4.4 from lock file\nnpm error Missing: normalize-package-data@6.0.2 from lock file\nnpm error Missing: parse-json@8.3.0 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: unicorn-magic@0.1.0 from lock file\nnpm error Missing: hosted-git-info@7.0.2 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: validate-npm-package-license@3.0.4 from lock file\nnpm error Missing: lru-cache@10.4.3 from lock file\nnpm error Missing: glob@7.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: is-promise@4.0.0 from lock file\nnpm error Invalid: lock file's path-to-regexp@0.1.12 does not satisfy path-to-regexp@8.2.0\nnpm error Missing: queue-microtask@1.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: randombytes@2.1.0 from lock file\nnpm error Missing: is-arguments@1.2.0 from lock file\nnpm error Missing: is-generator-function@1.1.0 from lock file\nnpm error Missing: is-typed-array@1.1.15 from lock file\nnpm error Missing: which-typed-array@1.1.19 from lock file\nnpm error Missing: safe-regex-test@1.1.0 from lock file\nnpm error Missing: is-regex@1.2.1 from lock file\nnpm error Missing: spdx-correct@3.2.0 from lock file\nnpm error Missing: spdx-expression-parse@3.0.1 from lock file\nnpm error Missing: spdx-license-ids@3.0.21 from lock file\nnpm error Missing: spdx-exceptions@2.5.0 from lock file\nnpm error Missing: available-typed-arrays@1.0.7 from lock file\nnpm error Missing: call-bind@1.0.8 from lock file\nnpm error Missing: for-each@0.3.5 from lock file\nnpm error Missing: possible-typed-array-names@1.1.0 from lock file\nnpm error Missing: set-function-length@1.2.2 from lock file\nnpm error Missing: is-callable@1.2.7 from lock file\nnpm error Missing: define-data-property@1.1.4 from lock file\nnpm error Missing: has-property-descriptors@1.0.2 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: decamelize@4.0.0 from lock file\nnpm error Missing: flat@5.0.2 from lock file\nnpm error Missing: is-plain-obj@2.1.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: uri-js@4.4.1 from lock file\nnpm error Missing: punycode@2.3.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: iconv-lite@0.6.3 from lock file\nnpm error Missing: raw-body@3.0.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: media-typer@1.1.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: index-to-position@1.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-08-05T20_51_55_108Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157."}}
[debug] [2025-08-05T20:52:33.668Z] Got source token undefined for region us-central1
[error] Build failed with status: FAILURE and message: npm warn EBADENGINE Unsupported engine {
npm warn EBADENGINE   package: '@firebase/util@1.13.0',
npm warn EBADENGINE   required: { node: '>=20.0.0' },
npm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }
npm warn EBADENGINE }
npm error code EUSAGE
npm error
npm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.
npm error
npm error Missing: @google-cloud/functions-framework@4.0.0 from lock file
npm error Missing: agora-access-token@2.0.4 from lock file
npm error Missing: dotenv@17.2.1 from lock file
npm error Missing: eslint@8.57.1 from lock file
npm error Missing: eslint-config-google@0.14.0 from lock file
npm error Invalid: lock file's express@4.21.2 does not satisfy express@5.1.0
npm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@13.4.0
npm error Missing: mocha@10.8.2 from lock file
npm error Missing: cloudevents@8.0.3 from lock file
npm error Missing: express@4.21.2 from lock file
npm error Missing: minimist@1.2.8 from lock file
npm error Missing: read-package-up@11.0.0 from lock file
npm error Missing: semver@7.7.2 from lock file
npm error Missing: crc-32@1.2.0 from lock file
npm error Missing: cuint@0.2.2 from lock file
npm error Missing: ajv@8.17.1 from lock file
npm error Missing: ajv-formats@2.1.1 from lock file
npm error Missing: process@0.11.10 from lock file
npm error Missing: util@0.12.5 from lock file
npm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2
npm error Missing: fast-uri@3.0.6 from lock file
npm error Missing: json-schema-traverse@1.0.0 from lock file
npm error Missing: require-from-string@2.0.2 from lock file
npm error Missing: exit-on-epipe@1.0.1 from lock file
npm error Missing: printj@1.1.2 from lock file
npm error Missing: @eslint-community/eslint-utils@4.7.0 from lock file
npm error Missing: @eslint-community/regexpp@4.12.1 from lock file
npm error Missing: @eslint/eslintrc@2.1.4 from lock file
npm error Missing: @eslint/js@8.57.1 from lock file
npm error Missing: @humanwhocodes/config-array@0.13.0 from lock file
npm error Missing: @humanwhocodes/module-importer@1.0.1 from lock file
npm error Missing: @nodelib/fs.walk@1.2.8 from lock file
npm error Missing: ajv@6.12.6 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: doctrine@3.0.0 from lock file
npm error Missing: escape-string-regexp@4.0.0 from lock file
npm error Missing: eslint-scope@7.2.2 from lock file
npm error Missing: eslint-visitor-keys@3.4.3 from lock file
npm error Missing: espree@9.6.1 from lock file
npm error Missing: esquery@1.6.0 from lock file
npm error Missing: esutils@2.0.3 from lock file
npm error Missing: file-entry-cache@6.0.1 from lock file
npm error Missing: find-up@5.0.0 from lock file
npm error Missing: glob-parent@6.0.2 from lock file
npm error Missing: globals@13.24.0 from lock file
npm error Missing: graphemer@1.4.0 from lock file
npm error Missing: ignore@5.3.2 from lock file
npm error Missing: is-glob@4.0.3 from lock file
npm error Missing: is-path-inside@3.0.3 from lock file
npm error Missing: js-yaml@4.1.0 from lock file
npm error Missing: json-stable-stringify-without-jsonify@1.0.1 from lock file
npm error Missing: levn@0.4.1 from lock file
npm error Missing: lodash.merge@4.6.2 from lock file
npm error Missing: minimatch@3.1.2 from lock file
npm error Missing: optionator@0.9.4 from lock file
npm error Missing: strip-ansi@6.0.1 from lock file
npm error Missing: text-table@0.2.0 from lock file
npm error Missing: ajv@6.12.6 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: import-fresh@3.3.1 from lock file
npm error Missing: js-yaml@4.1.0 from lock file
npm error Missing: minimatch@3.1.2 from lock file
npm error Missing: @humanwhocodes/object-schema@2.0.3 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: minimatch@3.1.2 from lock file
npm error Missing: @nodelib/fs.scandir@2.1.5 from lock file
npm error Missing: fastq@1.19.1 from lock file
npm error Missing: @nodelib/fs.stat@2.0.5 from lock file
npm error Missing: run-parallel@1.2.0 from lock file
npm error Missing: esrecurse@4.3.0 from lock file
npm error Missing: estraverse@5.3.0 from lock file
npm error Missing: acorn@8.15.0 from lock file
npm error Missing: acorn-jsx@5.3.2 from lock file
npm error Invalid: lock file's accepts@1.3.8 does not satisfy accepts@2.0.0
npm error Missing: body-parser@2.2.0 from lock file
npm error Invalid: lock file's content-disposition@0.5.4 does not satisfy content-disposition@1.0.0
npm error Invalid: lock file's cookie-signature@1.0.6 does not satisfy cookie-signature@1.2.2
npm error Missing: debug@4.4.1 from lock file
npm error Invalid: lock file's finalhandler@1.3.1 does not satisfy finalhandler@2.1.0
npm error Invalid: lock file's fresh@0.5.2 does not satisfy fresh@2.0.0
npm error Invalid: lock file's merge-descriptors@1.0.3 does not satisfy merge-descriptors@2.0.0
npm error Missing: mime-types@3.0.1 from lock file
npm error Missing: qs@6.14.0 from lock file
npm error Missing: router@2.2.0 from lock file
npm error Invalid: lock file's send@0.19.0 does not satisfy send@1.2.0
npm error Invalid: lock file's serve-static@1.16.2 does not satisfy serve-static@2.2.0
npm error Missing: type-is@2.0.1 from lock file
npm error Missing: mime-types@3.0.1 from lock file
npm error Invalid: lock file's negotiator@0.6.3 does not satisfy negotiator@1.0.0
npm error Missing: reusify@1.1.0 from lock file
npm error Missing: flat-cache@3.2.0 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@2.0.11
npm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@1.0.16
npm error Missing: uuid@11.1.0 from lock file
npm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.6.18
npm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@1.0.20
npm error Missing: @firebase/database-types@1.0.15 from lock file
npm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.4.4
npm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.12.1
npm error Invalid: lock file's @firebase/app-check-interop-types@0.3.2 does not satisfy @firebase/app-check-interop-types@0.3.3
npm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.2.4
npm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3
npm error Missing: @firebase/util@1.13.0 from lock file
npm error Missing: express@4.21.2 from lock file
npm error Missing: flatted@3.3.3 from lock file
npm error Missing: keyv@4.5.4 from lock file
npm error Missing: rimraf@3.0.2 from lock file
npm error Missing: type-fest@0.20.2 from lock file
npm error Missing: parent-module@1.0.1 from lock file
npm error Missing: resolve-from@4.0.0 from lock file
npm error Missing: is-extglob@2.1.1 from lock file
npm error Missing: json-buffer@3.0.1 from lock file
npm error Missing: prelude-ls@1.2.1 from lock file
npm error Missing: type-check@0.4.0 from lock file
npm error Missing: ansi-colors@4.1.3 from lock file
npm error Missing: browser-stdout@1.3.1 from lock file
npm error Missing: chokidar@3.6.0 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: diff@5.2.0 from lock file
npm error Missing: escape-string-regexp@4.0.0 from lock file
npm error Missing: find-up@5.0.0 from lock file
npm error Missing: glob@8.1.0 from lock file
npm error Missing: he@1.2.0 from lock file
npm error Missing: js-yaml@4.1.0 from lock file
npm error Missing: log-symbols@4.1.0 from lock file
npm error Missing: minimatch@5.1.6 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: serialize-javascript@6.0.2 from lock file
npm error Missing: supports-color@8.1.1 from lock file
npm error Missing: workerpool@6.5.1 from lock file
npm error Missing: yargs@16.2.0 from lock file
npm error Missing: yargs-parser@20.2.9 from lock file
npm error Missing: yargs-unparser@2.0.0 from lock file
npm error Missing: glob-parent@5.1.2 from lock file
npm error Missing: is-binary-path@2.1.0 from lock file
npm error Missing: readdirp@3.6.0 from lock file
npm error Missing: binary-extensions@2.3.0 from lock file
npm error Missing: is-unicode-supported@0.1.0 from lock file
npm error Missing: deep-is@0.1.4 from lock file
npm error Missing: fast-levenshtein@2.0.6 from lock file
npm error Missing: word-wrap@1.2.5 from lock file
npm error Missing: find-up-simple@1.0.1 from lock file
npm error Missing: read-pkg@9.0.1 from lock file
npm error Missing: type-fest@4.41.0 from lock file
npm error Missing: @types/normalize-package-data@2.4.4 from lock file
npm error Missing: normalize-package-data@6.0.2 from lock file
npm error Missing: parse-json@8.3.0 from lock file
npm error Missing: type-fest@4.41.0 from lock file
npm error Missing: unicorn-magic@0.1.0 from lock file
npm error Missing: hosted-git-info@7.0.2 from lock file
npm error Missing: semver@7.7.2 from lock file
npm error Missing: validate-npm-package-license@3.0.4 from lock file
npm error Missing: lru-cache@10.4.3 from lock file
npm error Missing: glob@7.2.3 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: is-promise@4.0.0 from lock file
npm error Invalid: lock file's path-to-regexp@0.1.12 does not satisfy path-to-regexp@8.2.0
npm error Missing: queue-microtask@1.2.3 from lock file
npm error Missing: debug@4.4.1 from lock file
npm error Missing: mime-types@3.0.1 from lock file
npm error Missing: randombytes@2.1.0 from lock file
npm error Missing: is-arguments@1.2.0 from lock file
npm error Missing: is-generator-function@1.1.0 from lock file
npm error Missing: is-typed-array@1.1.15 from lock file
npm error Missing: which-typed-array@1.1.19 from lock file
npm error Missing: safe-regex-test@1.1.0 from lock file
npm error Missing: is-regex@1.2.1 from lock file
npm error Missing: spdx-correct@3.2.0 from lock file
npm error Missing: spdx-expression-parse@3.0.1 from lock file
npm error Missing: spdx-license-ids@3.0.21 from lock file
npm error Missing: spdx-exceptions@2.5.0 from lock file
npm error Missing: available-typed-arrays@1.0.7 from lock file
npm error Missing: call-bind@1.0.8 from lock file
npm error Missing: for-each@0.3.5 from lock file
npm error Missing: possible-typed-array-names@1.1.0 from lock file
npm error Missing: set-function-length@1.2.2 from lock file
npm error Missing: is-callable@1.2.7 from lock file
npm error Missing: define-data-property@1.1.4 from lock file
npm error Missing: has-property-descriptors@1.0.2 from lock file
npm error Missing: camelcase@6.3.0 from lock file
npm error Missing: decamelize@4.0.0 from lock file
npm error Missing: flat@5.0.2 from lock file
npm error Missing: is-plain-obj@2.1.0 from lock file
npm error Missing: json-schema-traverse@0.4.1 from lock file
npm error Missing: uri-js@4.4.1 from lock file
npm error Missing: punycode@2.3.1 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: argparse@2.0.1 from lock file
npm error Missing: brace-expansion@1.1.12 from lock file
npm error Missing: accepts@1.3.8 from lock file
npm error Missing: content-disposition@0.5.4 from lock file
npm error Missing: cookie-signature@1.0.6 from lock file
npm error Missing: finalhandler@1.3.1 from lock file
npm error Missing: fresh@0.5.2 from lock file
npm error Missing: merge-descriptors@1.0.3 from lock file
npm error Missing: path-to-regexp@0.1.12 from lock file
npm error Missing: send@0.19.0 from lock file
npm error Missing: serve-static@1.16.2 from lock file
npm error Missing: negotiator@0.6.3 from lock file
npm error Missing: encodeurl@1.0.2 from lock file
npm error Missing: mime@1.6.0 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: brace-expansion@1.1.12 from lock file
npm error Missing: mime-db@1.54.0 from lock file
npm error Missing: json-schema-traverse@0.4.1 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: locate-path@6.0.0 from lock file
npm error Missing: argparse@2.0.1 from lock file
npm error Missing: p-locate@5.0.0 from lock file
npm error Missing: brace-expansion@1.1.12 from lock file
npm error Missing: ansi-regex@5.0.1 from lock file
npm error Missing: iconv-lite@0.6.3 from lock file
npm error Missing: raw-body@3.0.0 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: mime-db@1.54.0 from lock file
npm error Missing: media-typer@1.1.0 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: accepts@1.3.8 from lock file
npm error Missing: content-disposition@0.5.4 from lock file
npm error Missing: cookie-signature@1.0.6 from lock file
npm error Missing: finalhandler@1.3.1 from lock file
npm error Missing: fresh@0.5.2 from lock file
npm error Missing: merge-descriptors@1.0.3 from lock file
npm error Missing: path-to-regexp@0.1.12 from lock file
npm error Missing: send@0.19.0 from lock file
npm error Missing: serve-static@1.16.2 from lock file
npm error Missing: negotiator@0.6.3 from lock file
npm error Missing: encodeurl@1.0.2 from lock file
npm error Missing: mime@1.6.0 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: locate-path@6.0.0 from lock file
npm error Missing: argparse@2.0.1 from lock file
npm error Missing: p-locate@5.0.0 from lock file
npm error Missing: cliui@7.0.4 from lock file
npm error Missing: string-width@4.2.3 from lock file
npm error Missing: strip-ansi@6.0.1 from lock file
npm error Missing: wrap-ansi@7.0.0 from lock file
npm error Missing: emoji-regex@8.0.0 from lock file
npm error Missing: ansi-regex@5.0.1 from lock file
npm error Missing: index-to-position@1.1.0 from lock file
npm error Missing: minimatch@3.1.2 from lock file
npm error Missing: brace-expansion@1.1.12 from lock file
npm error Missing: ms@2.1.3 from lock file
npm error Missing: mime-db@1.54.0 from lock file
npm error
npm error Clean install a project
npm error
npm error Usage:
npm error npm ci
npm error
npm error Options:
npm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]
npm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]
npm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]
npm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]
npm error [--no-bin-links] [--no-fund] [--dry-run]
npm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]
npm error [-ws|--workspaces] [--include-workspace-root] [--install-links]
npm error
npm error aliases: clean-install, ic, install-clean, isntall-clean
npm error
npm error Run "npm help ci" for more info
npm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-08-05T20_51_55_108Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157.
[debug] [2025-08-05T20:52:33.679Z] Total Function Deployment time: 62253
[debug] [2025-08-05T20:52:33.679Z] 2 Functions Deployed
[debug] [2025-08-05T20:52:33.679Z] 2 Functions Errored
[debug] [2025-08-05T20:52:33.679Z] 0 Function Deployments Aborted
[debug] [2025-08-05T20:52:33.679Z] Average Function Deployment time: 56811.5
[info] 
[info] Functions deploy had errors with the following functions:
	api(us-central1)
	cleanupExpiredActiveChats(us-central1)
[debug] [2025-08-05T20:52:34.008Z] Not printing URL for HTTPS function. Typically this means it didn't match a filter or we failed deployment
[debug] [2025-08-05T20:52:34.010Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:34.010Z] Checked if tokens are valid: true, expires at: 1754430602596
[debug] [2025-08-05T20:52:34.010Z] >>> [apiv2][query] GET https://artifactregistry.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts [none]
[debug] [2025-08-05T20:52:35.601Z] <<< [apiv2][status] GET https://artifactregistry.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts 200
[debug] [2025-08-05T20:52:35.601Z] <<< [apiv2][body] GET https://artifactregistry.googleapis.com/v1/projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts {"name":"projects/doctor-app-98244/locations/us-central1/repositories/gcf-artifacts","format":"DOCKER","description":"This repository is created and used by Cloud Functions for storing function docker images.","labels":{"goog-managed-by":"cloudfunctions"},"createTime":"2025-07-16T08:21:03.884956Z","updateTime":"2025-07-16T16:22:29.830839Z","mode":"STANDARD_REPOSITORY","cleanupPolicies":{"firebase-functions-cleanup":{"id":"firebase-functions-cleanup","action":"DELETE","condition":{"tagState":"ANY","olderThan":"2592000s"}}},"sizeBytes":"213635925","vulnerabilityScanningConfig":{"lastEnableTime":"2025-07-16T08:20:55.570038638Z","enablementState":"SCANNING_DISABLED","enablementStateReason":"API containerscanning.googleapis.com is not enabled."},"satisfiesPzi":true,"registryUri":"us-central1-docker.pkg.dev/doctor-app-98244/gcf-artifacts"}
[debug] [2025-08-05T20:52:35.601Z] Functions deploy failed.
[debug] [2025-08-05T20:52:35.602Z] {
  "endpoint": {
    "id": "cleanupExpiredActiveChats",
    "project": "doctor-app-98244",
    "region": "us-central1",
    "entryPoint": "cleanupExpiredActiveChats",
    "platform": "gcfv1",
    "runtime": "nodejs18",
    "scheduleTrigger": {
      "schedule": "every 5 minutes",
      "timeZone": "Asia/Kolkata",
      "retryConfig": {
        "maxBackoffSeconds": null,
        "minBackoffSeconds": null,
        "maxRetrySeconds": null,
        "retryCount": null,
        "maxDoublings": null
      }
    },
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "vpc": null,
    "environmentVariables": {
      "FIREBASE_CONFIG": "{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "doctor-app-98244",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats"
    },
    "codebase": "default",
    "targetedByOnly": false,
    "hash": "2995a34319023d582e3ec7ab67adf31d23e68ccc"
  },
  "op": "create",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Gen1 operation for function projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats failed: Build failed: npm warn EBADENGINE Unsupported engine {\nnpm warn EBADENGINE   package: '@firebase/util@1.13.0',\nnpm warn EBADENGINE   required: { node: '>=20.0.0' },\nnpm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }\nnpm warn EBADENGINE }\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: @google-cloud/functions-framework@4.0.0 from lock file\nnpm error Missing: agora-access-token@2.0.4 from lock file\nnpm error Missing: dotenv@17.2.1 from lock file\nnpm error Missing: eslint@8.57.1 from lock file\nnpm error Missing: eslint-config-google@0.14.0 from lock file\nnpm error Invalid: lock file's express@4.21.2 does not satisfy express@5.1.0\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@13.4.0\nnpm error Missing: mocha@10.8.2 from lock file\nnpm error Missing: cloudevents@8.0.3 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: minimist@1.2.8 from lock file\nnpm error Missing: read-package-up@11.0.0 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: crc-32@1.2.0 from lock file\nnpm error Missing: cuint@0.2.2 from lock file\nnpm error Missing: ajv@8.17.1 from lock file\nnpm error Missing: ajv-formats@2.1.1 from lock file\nnpm error Missing: process@0.11.10 from lock file\nnpm error Missing: util@0.12.5 from lock file\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: fast-uri@3.0.6 from lock file\nnpm error Missing: json-schema-traverse@1.0.0 from lock file\nnpm error Missing: require-from-string@2.0.2 from lock file\nnpm error Missing: exit-on-epipe@1.0.1 from lock file\nnpm error Missing: printj@1.1.2 from lock file\nnpm error Missing: @eslint-community/eslint-utils@4.7.0 from lock file\nnpm error Missing: @eslint-community/regexpp@4.12.1 from lock file\nnpm error Missing: @eslint/eslintrc@2.1.4 from lock file\nnpm error Missing: @eslint/js@8.57.1 from lock file\nnpm error Missing: @humanwhocodes/config-array@0.13.0 from lock file\nnpm error Missing: @humanwhocodes/module-importer@1.0.1 from lock file\nnpm error Missing: @nodelib/fs.walk@1.2.8 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: doctrine@3.0.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: eslint-scope@7.2.2 from lock file\nnpm error Missing: eslint-visitor-keys@3.4.3 from lock file\nnpm error Missing: espree@9.6.1 from lock file\nnpm error Missing: esquery@1.6.0 from lock file\nnpm error Missing: esutils@2.0.3 from lock file\nnpm error Missing: file-entry-cache@6.0.1 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob-parent@6.0.2 from lock file\nnpm error Missing: globals@13.24.0 from lock file\nnpm error Missing: graphemer@1.4.0 from lock file\nnpm error Missing: ignore@5.3.2 from lock file\nnpm error Missing: is-glob@4.0.3 from lock file\nnpm error Missing: is-path-inside@3.0.3 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: json-stable-stringify-without-jsonify@1.0.1 from lock file\nnpm error Missing: levn@0.4.1 from lock file\nnpm error Missing: lodash.merge@4.6.2 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: optionator@0.9.4 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: text-table@0.2.0 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: import-fresh@3.3.1 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @humanwhocodes/object-schema@2.0.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @nodelib/fs.scandir@2.1.5 from lock file\nnpm error Missing: fastq@1.19.1 from lock file\nnpm error Missing: @nodelib/fs.stat@2.0.5 from lock file\nnpm error Missing: run-parallel@1.2.0 from lock file\nnpm error Missing: esrecurse@4.3.0 from lock file\nnpm error Missing: estraverse@5.3.0 from lock file\nnpm error Missing: acorn@8.15.0 from lock file\nnpm error Missing: acorn-jsx@5.3.2 from lock file\nnpm error Invalid: lock file's accepts@1.3.8 does not satisfy accepts@2.0.0\nnpm error Missing: body-parser@2.2.0 from lock file\nnpm error Invalid: lock file's content-disposition@0.5.4 does not satisfy content-disposition@1.0.0\nnpm error Invalid: lock file's cookie-signature@1.0.6 does not satisfy cookie-signature@1.2.2\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's finalhandler@1.3.1 does not satisfy finalhandler@2.1.0\nnpm error Invalid: lock file's fresh@0.5.2 does not satisfy fresh@2.0.0\nnpm error Invalid: lock file's merge-descriptors@1.0.3 does not satisfy merge-descriptors@2.0.0\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: qs@6.14.0 from lock file\nnpm error Missing: router@2.2.0 from lock file\nnpm error Invalid: lock file's send@0.19.0 does not satisfy send@1.2.0\nnpm error Invalid: lock file's serve-static@1.16.2 does not satisfy serve-static@2.2.0\nnpm error Missing: type-is@2.0.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Invalid: lock file's negotiator@0.6.3 does not satisfy negotiator@1.0.0\nnpm error Missing: reusify@1.1.0 from lock file\nnpm error Missing: flat-cache@3.2.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@2.0.11\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@1.0.16\nnpm error Missing: uuid@11.1.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.6.18\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@1.0.20\nnpm error Missing: @firebase/database-types@1.0.15 from lock file\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.4.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.12.1\nnpm error Invalid: lock file's @firebase/app-check-interop-types@0.3.2 does not satisfy @firebase/app-check-interop-types@0.3.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.2.4\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/util@1.13.0 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: flatted@3.3.3 from lock file\nnpm error Missing: keyv@4.5.4 from lock file\nnpm error Missing: rimraf@3.0.2 from lock file\nnpm error Missing: type-fest@0.20.2 from lock file\nnpm error Missing: parent-module@1.0.1 from lock file\nnpm error Missing: resolve-from@4.0.0 from lock file\nnpm error Missing: is-extglob@2.1.1 from lock file\nnpm error Missing: json-buffer@3.0.1 from lock file\nnpm error Missing: prelude-ls@1.2.1 from lock file\nnpm error Missing: type-check@0.4.0 from lock file\nnpm error Missing: ansi-colors@4.1.3 from lock file\nnpm error Missing: browser-stdout@1.3.1 from lock file\nnpm error Missing: chokidar@3.6.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: diff@5.2.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob@8.1.0 from lock file\nnpm error Missing: he@1.2.0 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: log-symbols@4.1.0 from lock file\nnpm error Missing: minimatch@5.1.6 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: serialize-javascript@6.0.2 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: workerpool@6.5.1 from lock file\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: yargs-unparser@2.0.0 from lock file\nnpm error Missing: glob-parent@5.1.2 from lock file\nnpm error Missing: is-binary-path@2.1.0 from lock file\nnpm error Missing: readdirp@3.6.0 from lock file\nnpm error Missing: binary-extensions@2.3.0 from lock file\nnpm error Missing: is-unicode-supported@0.1.0 from lock file\nnpm error Missing: deep-is@0.1.4 from lock file\nnpm error Missing: fast-levenshtein@2.0.6 from lock file\nnpm error Missing: word-wrap@1.2.5 from lock file\nnpm error Missing: find-up-simple@1.0.1 from lock file\nnpm error Missing: read-pkg@9.0.1 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: @types/normalize-package-data@2.4.4 from lock file\nnpm error Missing: normalize-package-data@6.0.2 from lock file\nnpm error Missing: parse-json@8.3.0 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: unicorn-magic@0.1.0 from lock file\nnpm error Missing: hosted-git-info@7.0.2 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: validate-npm-package-license@3.0.4 from lock file\nnpm error Missing: lru-cache@10.4.3 from lock file\nnpm error Missing: glob@7.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: is-promise@4.0.0 from lock file\nnpm error Invalid: lock file's path-to-regexp@0.1.12 does not satisfy path-to-regexp@8.2.0\nnpm error Missing: queue-microtask@1.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: randombytes@2.1.0 from lock file\nnpm error Missing: is-arguments@1.2.0 from lock file\nnpm error Missing: is-generator-function@1.1.0 from lock file\nnpm error Missing: is-typed-array@1.1.15 from lock file\nnpm error Missing: which-typed-array@1.1.19 from lock file\nnpm error Missing: safe-regex-test@1.1.0 from lock file\nnpm error Missing: is-regex@1.2.1 from lock file\nnpm error Missing: spdx-correct@3.2.0 from lock file\nnpm error Missing: spdx-expression-parse@3.0.1 from lock file\nnpm error Missing: spdx-license-ids@3.0.21 from lock file\nnpm error Missing: spdx-exceptions@2.5.0 from lock file\nnpm error Missing: available-typed-arrays@1.0.7 from lock file\nnpm error Missing: call-bind@1.0.8 from lock file\nnpm error Missing: for-each@0.3.5 from lock file\nnpm error Missing: possible-typed-array-names@1.1.0 from lock file\nnpm error Missing: set-function-length@1.2.2 from lock file\nnpm error Missing: is-callable@1.2.7 from lock file\nnpm error Missing: define-data-property@1.1.4 from lock file\nnpm error Missing: has-property-descriptors@1.0.2 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: decamelize@4.0.0 from lock file\nnpm error Missing: flat@5.0.2 from lock file\nnpm error Missing: is-plain-obj@2.1.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: uri-js@4.4.1 from lock file\nnpm error Missing: punycode@2.3.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: iconv-lite@0.6.3 from lock file\nnpm error Missing: raw-body@3.0.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: media-typer@1.1.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: index-to-position@1.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-08-05T20_51_51_697Z-debug-0.log; Error ID: 7fa33aaa.",
    "original": {
      "code": 3,
      "message": "Gen1 operation for function projects/doctor-app-98244/locations/us-central1/functions/cleanupExpiredActiveChats failed: Build failed: npm warn EBADENGINE Unsupported engine {\nnpm warn EBADENGINE   package: '@firebase/util@1.13.0',\nnpm warn EBADENGINE   required: { node: '>=20.0.0' },\nnpm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }\nnpm warn EBADENGINE }\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: @google-cloud/functions-framework@4.0.0 from lock file\nnpm error Missing: agora-access-token@2.0.4 from lock file\nnpm error Missing: dotenv@17.2.1 from lock file\nnpm error Missing: eslint@8.57.1 from lock file\nnpm error Missing: eslint-config-google@0.14.0 from lock file\nnpm error Invalid: lock file's express@4.21.2 does not satisfy express@5.1.0\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@13.4.0\nnpm error Missing: mocha@10.8.2 from lock file\nnpm error Missing: cloudevents@8.0.3 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: minimist@1.2.8 from lock file\nnpm error Missing: read-package-up@11.0.0 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: crc-32@1.2.0 from lock file\nnpm error Missing: cuint@0.2.2 from lock file\nnpm error Missing: ajv@8.17.1 from lock file\nnpm error Missing: ajv-formats@2.1.1 from lock file\nnpm error Missing: process@0.11.10 from lock file\nnpm error Missing: util@0.12.5 from lock file\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: fast-uri@3.0.6 from lock file\nnpm error Missing: json-schema-traverse@1.0.0 from lock file\nnpm error Missing: require-from-string@2.0.2 from lock file\nnpm error Missing: exit-on-epipe@1.0.1 from lock file\nnpm error Missing: printj@1.1.2 from lock file\nnpm error Missing: @eslint-community/eslint-utils@4.7.0 from lock file\nnpm error Missing: @eslint-community/regexpp@4.12.1 from lock file\nnpm error Missing: @eslint/eslintrc@2.1.4 from lock file\nnpm error Missing: @eslint/js@8.57.1 from lock file\nnpm error Missing: @humanwhocodes/config-array@0.13.0 from lock file\nnpm error Missing: @humanwhocodes/module-importer@1.0.1 from lock file\nnpm error Missing: @nodelib/fs.walk@1.2.8 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: doctrine@3.0.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: eslint-scope@7.2.2 from lock file\nnpm error Missing: eslint-visitor-keys@3.4.3 from lock file\nnpm error Missing: espree@9.6.1 from lock file\nnpm error Missing: esquery@1.6.0 from lock file\nnpm error Missing: esutils@2.0.3 from lock file\nnpm error Missing: file-entry-cache@6.0.1 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob-parent@6.0.2 from lock file\nnpm error Missing: globals@13.24.0 from lock file\nnpm error Missing: graphemer@1.4.0 from lock file\nnpm error Missing: ignore@5.3.2 from lock file\nnpm error Missing: is-glob@4.0.3 from lock file\nnpm error Missing: is-path-inside@3.0.3 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: json-stable-stringify-without-jsonify@1.0.1 from lock file\nnpm error Missing: levn@0.4.1 from lock file\nnpm error Missing: lodash.merge@4.6.2 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: optionator@0.9.4 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: text-table@0.2.0 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: import-fresh@3.3.1 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @humanwhocodes/object-schema@2.0.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @nodelib/fs.scandir@2.1.5 from lock file\nnpm error Missing: fastq@1.19.1 from lock file\nnpm error Missing: @nodelib/fs.stat@2.0.5 from lock file\nnpm error Missing: run-parallel@1.2.0 from lock file\nnpm error Missing: esrecurse@4.3.0 from lock file\nnpm error Missing: estraverse@5.3.0 from lock file\nnpm error Missing: acorn@8.15.0 from lock file\nnpm error Missing: acorn-jsx@5.3.2 from lock file\nnpm error Invalid: lock file's accepts@1.3.8 does not satisfy accepts@2.0.0\nnpm error Missing: body-parser@2.2.0 from lock file\nnpm error Invalid: lock file's content-disposition@0.5.4 does not satisfy content-disposition@1.0.0\nnpm error Invalid: lock file's cookie-signature@1.0.6 does not satisfy cookie-signature@1.2.2\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's finalhandler@1.3.1 does not satisfy finalhandler@2.1.0\nnpm error Invalid: lock file's fresh@0.5.2 does not satisfy fresh@2.0.0\nnpm error Invalid: lock file's merge-descriptors@1.0.3 does not satisfy merge-descriptors@2.0.0\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: qs@6.14.0 from lock file\nnpm error Missing: router@2.2.0 from lock file\nnpm error Invalid: lock file's send@0.19.0 does not satisfy send@1.2.0\nnpm error Invalid: lock file's serve-static@1.16.2 does not satisfy serve-static@2.2.0\nnpm error Missing: type-is@2.0.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Invalid: lock file's negotiator@0.6.3 does not satisfy negotiator@1.0.0\nnpm error Missing: reusify@1.1.0 from lock file\nnpm error Missing: flat-cache@3.2.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@2.0.11\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@1.0.16\nnpm error Missing: uuid@11.1.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.6.18\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@1.0.20\nnpm error Missing: @firebase/database-types@1.0.15 from lock file\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.4.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.12.1\nnpm error Invalid: lock file's @firebase/app-check-interop-types@0.3.2 does not satisfy @firebase/app-check-interop-types@0.3.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.2.4\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/util@1.13.0 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: flatted@3.3.3 from lock file\nnpm error Missing: keyv@4.5.4 from lock file\nnpm error Missing: rimraf@3.0.2 from lock file\nnpm error Missing: type-fest@0.20.2 from lock file\nnpm error Missing: parent-module@1.0.1 from lock file\nnpm error Missing: resolve-from@4.0.0 from lock file\nnpm error Missing: is-extglob@2.1.1 from lock file\nnpm error Missing: json-buffer@3.0.1 from lock file\nnpm error Missing: prelude-ls@1.2.1 from lock file\nnpm error Missing: type-check@0.4.0 from lock file\nnpm error Missing: ansi-colors@4.1.3 from lock file\nnpm error Missing: browser-stdout@1.3.1 from lock file\nnpm error Missing: chokidar@3.6.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: diff@5.2.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob@8.1.0 from lock file\nnpm error Missing: he@1.2.0 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: log-symbols@4.1.0 from lock file\nnpm error Missing: minimatch@5.1.6 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: serialize-javascript@6.0.2 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: workerpool@6.5.1 from lock file\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: yargs-unparser@2.0.0 from lock file\nnpm error Missing: glob-parent@5.1.2 from lock file\nnpm error Missing: is-binary-path@2.1.0 from lock file\nnpm error Missing: readdirp@3.6.0 from lock file\nnpm error Missing: binary-extensions@2.3.0 from lock file\nnpm error Missing: is-unicode-supported@0.1.0 from lock file\nnpm error Missing: deep-is@0.1.4 from lock file\nnpm error Missing: fast-levenshtein@2.0.6 from lock file\nnpm error Missing: word-wrap@1.2.5 from lock file\nnpm error Missing: find-up-simple@1.0.1 from lock file\nnpm error Missing: read-pkg@9.0.1 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: @types/normalize-package-data@2.4.4 from lock file\nnpm error Missing: normalize-package-data@6.0.2 from lock file\nnpm error Missing: parse-json@8.3.0 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: unicorn-magic@0.1.0 from lock file\nnpm error Missing: hosted-git-info@7.0.2 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: validate-npm-package-license@3.0.4 from lock file\nnpm error Missing: lru-cache@10.4.3 from lock file\nnpm error Missing: glob@7.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: is-promise@4.0.0 from lock file\nnpm error Invalid: lock file's path-to-regexp@0.1.12 does not satisfy path-to-regexp@8.2.0\nnpm error Missing: queue-microtask@1.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: randombytes@2.1.0 from lock file\nnpm error Missing: is-arguments@1.2.0 from lock file\nnpm error Missing: is-generator-function@1.1.0 from lock file\nnpm error Missing: is-typed-array@1.1.15 from lock file\nnpm error Missing: which-typed-array@1.1.19 from lock file\nnpm error Missing: safe-regex-test@1.1.0 from lock file\nnpm error Missing: is-regex@1.2.1 from lock file\nnpm error Missing: spdx-correct@3.2.0 from lock file\nnpm error Missing: spdx-expression-parse@3.0.1 from lock file\nnpm error Missing: spdx-license-ids@3.0.21 from lock file\nnpm error Missing: spdx-exceptions@2.5.0 from lock file\nnpm error Missing: available-typed-arrays@1.0.7 from lock file\nnpm error Missing: call-bind@1.0.8 from lock file\nnpm error Missing: for-each@0.3.5 from lock file\nnpm error Missing: possible-typed-array-names@1.1.0 from lock file\nnpm error Missing: set-function-length@1.2.2 from lock file\nnpm error Missing: is-callable@1.2.7 from lock file\nnpm error Missing: define-data-property@1.1.4 from lock file\nnpm error Missing: has-property-descriptors@1.0.2 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: decamelize@4.0.0 from lock file\nnpm error Missing: flat@5.0.2 from lock file\nnpm error Missing: is-plain-obj@2.1.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: uri-js@4.4.1 from lock file\nnpm error Missing: punycode@2.3.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: iconv-lite@0.6.3 from lock file\nnpm error Missing: raw-body@3.0.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: media-typer@1.1.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: index-to-position@1.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-08-05T20_51_51_697Z-debug-0.log; Error ID: 7fa33aaa."
    },
    "status": 3,
    "code": 3
  }
}
[debug] [2025-08-05T20:52:35.603Z] {
  "endpoint": {
    "id": "api",
    "project": "doctor-app-98244",
    "region": "us-central1",
    "entryPoint": "api",
    "platform": "gcfv2",
    "runtime": "nodejs18",
    "httpsTrigger": {},
    "labels": {
      "deployment-tool": "cli-firebase"
    },
    "serviceAccount": null,
    "ingressSettings": null,
    "availableMemoryMb": null,
    "timeoutSeconds": null,
    "maxInstances": null,
    "minInstances": null,
    "concurrency": 80,
    "vpc": null,
    "environmentVariables": {
      "AGORA_APP_ID": "eaed21b901084e5eaf7d4b9ffdcb7a97",
      "AGORA_APP_CERTIFICATE": "b620483849a949dbbae9861376b7a414",
      "NEXT_PUBLIC_AGORA_APP_ID": "eaed21b901084e5eaf7d4b9ffdcb7a97",
      "NEXT_PUBLIC_AGORA_APP_CERTIFICATE": "b620483849a949dbbae9861376b7a414",
      "FIREBASE_CONFIG": "{\"projectId\":\"doctor-app-98244\",\"storageBucket\":\"doctor-app-98244.firebasestorage.app\"}",
      "GCLOUD_PROJECT": "doctor-app-98244",
      "EVENTARC_CLOUD_EVENT_SOURCE": "projects/doctor-app-98244/locations/us-central1/services/api",
      "FUNCTION_TARGET": "api",
      "LOG_EXECUTION_ID": "true"
    },
    "codebase": "default",
    "runServiceId": "api",
    "cpu": 1,
    "securityLevel": "SECURE_ALWAYS",
    "targetedByOnly": false,
    "hash": "dd9ab8199abd43bf22815beb39cc21579bfc01b9"
  },
  "op": "update",
  "original": {
    "name": "FirebaseError",
    "children": [],
    "exit": 1,
    "message": "Build failed with status: FAILURE and message: npm warn EBADENGINE Unsupported engine {\nnpm warn EBADENGINE   package: '@firebase/util@1.13.0',\nnpm warn EBADENGINE   required: { node: '>=20.0.0' },\nnpm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }\nnpm warn EBADENGINE }\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: @google-cloud/functions-framework@4.0.0 from lock file\nnpm error Missing: agora-access-token@2.0.4 from lock file\nnpm error Missing: dotenv@17.2.1 from lock file\nnpm error Missing: eslint@8.57.1 from lock file\nnpm error Missing: eslint-config-google@0.14.0 from lock file\nnpm error Invalid: lock file's express@4.21.2 does not satisfy express@5.1.0\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@13.4.0\nnpm error Missing: mocha@10.8.2 from lock file\nnpm error Missing: cloudevents@8.0.3 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: minimist@1.2.8 from lock file\nnpm error Missing: read-package-up@11.0.0 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: crc-32@1.2.0 from lock file\nnpm error Missing: cuint@0.2.2 from lock file\nnpm error Missing: ajv@8.17.1 from lock file\nnpm error Missing: ajv-formats@2.1.1 from lock file\nnpm error Missing: process@0.11.10 from lock file\nnpm error Missing: util@0.12.5 from lock file\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: fast-uri@3.0.6 from lock file\nnpm error Missing: json-schema-traverse@1.0.0 from lock file\nnpm error Missing: require-from-string@2.0.2 from lock file\nnpm error Missing: exit-on-epipe@1.0.1 from lock file\nnpm error Missing: printj@1.1.2 from lock file\nnpm error Missing: @eslint-community/eslint-utils@4.7.0 from lock file\nnpm error Missing: @eslint-community/regexpp@4.12.1 from lock file\nnpm error Missing: @eslint/eslintrc@2.1.4 from lock file\nnpm error Missing: @eslint/js@8.57.1 from lock file\nnpm error Missing: @humanwhocodes/config-array@0.13.0 from lock file\nnpm error Missing: @humanwhocodes/module-importer@1.0.1 from lock file\nnpm error Missing: @nodelib/fs.walk@1.2.8 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: doctrine@3.0.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: eslint-scope@7.2.2 from lock file\nnpm error Missing: eslint-visitor-keys@3.4.3 from lock file\nnpm error Missing: espree@9.6.1 from lock file\nnpm error Missing: esquery@1.6.0 from lock file\nnpm error Missing: esutils@2.0.3 from lock file\nnpm error Missing: file-entry-cache@6.0.1 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob-parent@6.0.2 from lock file\nnpm error Missing: globals@13.24.0 from lock file\nnpm error Missing: graphemer@1.4.0 from lock file\nnpm error Missing: ignore@5.3.2 from lock file\nnpm error Missing: is-glob@4.0.3 from lock file\nnpm error Missing: is-path-inside@3.0.3 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: json-stable-stringify-without-jsonify@1.0.1 from lock file\nnpm error Missing: levn@0.4.1 from lock file\nnpm error Missing: lodash.merge@4.6.2 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: optionator@0.9.4 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: text-table@0.2.0 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: import-fresh@3.3.1 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @humanwhocodes/object-schema@2.0.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @nodelib/fs.scandir@2.1.5 from lock file\nnpm error Missing: fastq@1.19.1 from lock file\nnpm error Missing: @nodelib/fs.stat@2.0.5 from lock file\nnpm error Missing: run-parallel@1.2.0 from lock file\nnpm error Missing: esrecurse@4.3.0 from lock file\nnpm error Missing: estraverse@5.3.0 from lock file\nnpm error Missing: acorn@8.15.0 from lock file\nnpm error Missing: acorn-jsx@5.3.2 from lock file\nnpm error Invalid: lock file's accepts@1.3.8 does not satisfy accepts@2.0.0\nnpm error Missing: body-parser@2.2.0 from lock file\nnpm error Invalid: lock file's content-disposition@0.5.4 does not satisfy content-disposition@1.0.0\nnpm error Invalid: lock file's cookie-signature@1.0.6 does not satisfy cookie-signature@1.2.2\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's finalhandler@1.3.1 does not satisfy finalhandler@2.1.0\nnpm error Invalid: lock file's fresh@0.5.2 does not satisfy fresh@2.0.0\nnpm error Invalid: lock file's merge-descriptors@1.0.3 does not satisfy merge-descriptors@2.0.0\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: qs@6.14.0 from lock file\nnpm error Missing: router@2.2.0 from lock file\nnpm error Invalid: lock file's send@0.19.0 does not satisfy send@1.2.0\nnpm error Invalid: lock file's serve-static@1.16.2 does not satisfy serve-static@2.2.0\nnpm error Missing: type-is@2.0.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Invalid: lock file's negotiator@0.6.3 does not satisfy negotiator@1.0.0\nnpm error Missing: reusify@1.1.0 from lock file\nnpm error Missing: flat-cache@3.2.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@2.0.11\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@1.0.16\nnpm error Missing: uuid@11.1.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.6.18\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@1.0.20\nnpm error Missing: @firebase/database-types@1.0.15 from lock file\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.4.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.12.1\nnpm error Invalid: lock file's @firebase/app-check-interop-types@0.3.2 does not satisfy @firebase/app-check-interop-types@0.3.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.2.4\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/util@1.13.0 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: flatted@3.3.3 from lock file\nnpm error Missing: keyv@4.5.4 from lock file\nnpm error Missing: rimraf@3.0.2 from lock file\nnpm error Missing: type-fest@0.20.2 from lock file\nnpm error Missing: parent-module@1.0.1 from lock file\nnpm error Missing: resolve-from@4.0.0 from lock file\nnpm error Missing: is-extglob@2.1.1 from lock file\nnpm error Missing: json-buffer@3.0.1 from lock file\nnpm error Missing: prelude-ls@1.2.1 from lock file\nnpm error Missing: type-check@0.4.0 from lock file\nnpm error Missing: ansi-colors@4.1.3 from lock file\nnpm error Missing: browser-stdout@1.3.1 from lock file\nnpm error Missing: chokidar@3.6.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: diff@5.2.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob@8.1.0 from lock file\nnpm error Missing: he@1.2.0 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: log-symbols@4.1.0 from lock file\nnpm error Missing: minimatch@5.1.6 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: serialize-javascript@6.0.2 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: workerpool@6.5.1 from lock file\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: yargs-unparser@2.0.0 from lock file\nnpm error Missing: glob-parent@5.1.2 from lock file\nnpm error Missing: is-binary-path@2.1.0 from lock file\nnpm error Missing: readdirp@3.6.0 from lock file\nnpm error Missing: binary-extensions@2.3.0 from lock file\nnpm error Missing: is-unicode-supported@0.1.0 from lock file\nnpm error Missing: deep-is@0.1.4 from lock file\nnpm error Missing: fast-levenshtein@2.0.6 from lock file\nnpm error Missing: word-wrap@1.2.5 from lock file\nnpm error Missing: find-up-simple@1.0.1 from lock file\nnpm error Missing: read-pkg@9.0.1 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: @types/normalize-package-data@2.4.4 from lock file\nnpm error Missing: normalize-package-data@6.0.2 from lock file\nnpm error Missing: parse-json@8.3.0 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: unicorn-magic@0.1.0 from lock file\nnpm error Missing: hosted-git-info@7.0.2 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: validate-npm-package-license@3.0.4 from lock file\nnpm error Missing: lru-cache@10.4.3 from lock file\nnpm error Missing: glob@7.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: is-promise@4.0.0 from lock file\nnpm error Invalid: lock file's path-to-regexp@0.1.12 does not satisfy path-to-regexp@8.2.0\nnpm error Missing: queue-microtask@1.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: randombytes@2.1.0 from lock file\nnpm error Missing: is-arguments@1.2.0 from lock file\nnpm error Missing: is-generator-function@1.1.0 from lock file\nnpm error Missing: is-typed-array@1.1.15 from lock file\nnpm error Missing: which-typed-array@1.1.19 from lock file\nnpm error Missing: safe-regex-test@1.1.0 from lock file\nnpm error Missing: is-regex@1.2.1 from lock file\nnpm error Missing: spdx-correct@3.2.0 from lock file\nnpm error Missing: spdx-expression-parse@3.0.1 from lock file\nnpm error Missing: spdx-license-ids@3.0.21 from lock file\nnpm error Missing: spdx-exceptions@2.5.0 from lock file\nnpm error Missing: available-typed-arrays@1.0.7 from lock file\nnpm error Missing: call-bind@1.0.8 from lock file\nnpm error Missing: for-each@0.3.5 from lock file\nnpm error Missing: possible-typed-array-names@1.1.0 from lock file\nnpm error Missing: set-function-length@1.2.2 from lock file\nnpm error Missing: is-callable@1.2.7 from lock file\nnpm error Missing: define-data-property@1.1.4 from lock file\nnpm error Missing: has-property-descriptors@1.0.2 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: decamelize@4.0.0 from lock file\nnpm error Missing: flat@5.0.2 from lock file\nnpm error Missing: is-plain-obj@2.1.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: uri-js@4.4.1 from lock file\nnpm error Missing: punycode@2.3.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: iconv-lite@0.6.3 from lock file\nnpm error Missing: raw-body@3.0.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: media-typer@1.1.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: index-to-position@1.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-08-05T20_51_55_108Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157.",
    "original": {
      "code": 3,
      "message": "Build failed with status: FAILURE and message: npm warn EBADENGINE Unsupported engine {\nnpm warn EBADENGINE   package: '@firebase/util@1.13.0',\nnpm warn EBADENGINE   required: { node: '>=20.0.0' },\nnpm warn EBADENGINE   current: { node: 'v18.20.8', npm: '10.8.2' }\nnpm warn EBADENGINE }\nnpm error code EUSAGE\nnpm error\nnpm error `npm ci` can only install packages when your package.json and package-lock.json or npm-shrinkwrap.json are in sync. Please update your lock file with `npm install` before continuing.\nnpm error\nnpm error Missing: @google-cloud/functions-framework@4.0.0 from lock file\nnpm error Missing: agora-access-token@2.0.4 from lock file\nnpm error Missing: dotenv@17.2.1 from lock file\nnpm error Missing: eslint@8.57.1 from lock file\nnpm error Missing: eslint-config-google@0.14.0 from lock file\nnpm error Invalid: lock file's express@4.21.2 does not satisfy express@5.1.0\nnpm error Invalid: lock file's firebase-admin@12.7.0 does not satisfy firebase-admin@13.4.0\nnpm error Missing: mocha@10.8.2 from lock file\nnpm error Missing: cloudevents@8.0.3 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: minimist@1.2.8 from lock file\nnpm error Missing: read-package-up@11.0.0 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: crc-32@1.2.0 from lock file\nnpm error Missing: cuint@0.2.2 from lock file\nnpm error Missing: ajv@8.17.1 from lock file\nnpm error Missing: ajv-formats@2.1.1 from lock file\nnpm error Missing: process@0.11.10 from lock file\nnpm error Missing: util@0.12.5 from lock file\nnpm error Invalid: lock file's uuid@10.0.0 does not satisfy uuid@8.3.2\nnpm error Missing: fast-uri@3.0.6 from lock file\nnpm error Missing: json-schema-traverse@1.0.0 from lock file\nnpm error Missing: require-from-string@2.0.2 from lock file\nnpm error Missing: exit-on-epipe@1.0.1 from lock file\nnpm error Missing: printj@1.1.2 from lock file\nnpm error Missing: @eslint-community/eslint-utils@4.7.0 from lock file\nnpm error Missing: @eslint-community/regexpp@4.12.1 from lock file\nnpm error Missing: @eslint/eslintrc@2.1.4 from lock file\nnpm error Missing: @eslint/js@8.57.1 from lock file\nnpm error Missing: @humanwhocodes/config-array@0.13.0 from lock file\nnpm error Missing: @humanwhocodes/module-importer@1.0.1 from lock file\nnpm error Missing: @nodelib/fs.walk@1.2.8 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: doctrine@3.0.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: eslint-scope@7.2.2 from lock file\nnpm error Missing: eslint-visitor-keys@3.4.3 from lock file\nnpm error Missing: espree@9.6.1 from lock file\nnpm error Missing: esquery@1.6.0 from lock file\nnpm error Missing: esutils@2.0.3 from lock file\nnpm error Missing: file-entry-cache@6.0.1 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob-parent@6.0.2 from lock file\nnpm error Missing: globals@13.24.0 from lock file\nnpm error Missing: graphemer@1.4.0 from lock file\nnpm error Missing: ignore@5.3.2 from lock file\nnpm error Missing: is-glob@4.0.3 from lock file\nnpm error Missing: is-path-inside@3.0.3 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: json-stable-stringify-without-jsonify@1.0.1 from lock file\nnpm error Missing: levn@0.4.1 from lock file\nnpm error Missing: lodash.merge@4.6.2 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: optionator@0.9.4 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: text-table@0.2.0 from lock file\nnpm error Missing: ajv@6.12.6 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: import-fresh@3.3.1 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @humanwhocodes/object-schema@2.0.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: @nodelib/fs.scandir@2.1.5 from lock file\nnpm error Missing: fastq@1.19.1 from lock file\nnpm error Missing: @nodelib/fs.stat@2.0.5 from lock file\nnpm error Missing: run-parallel@1.2.0 from lock file\nnpm error Missing: esrecurse@4.3.0 from lock file\nnpm error Missing: estraverse@5.3.0 from lock file\nnpm error Missing: acorn@8.15.0 from lock file\nnpm error Missing: acorn-jsx@5.3.2 from lock file\nnpm error Invalid: lock file's accepts@1.3.8 does not satisfy accepts@2.0.0\nnpm error Missing: body-parser@2.2.0 from lock file\nnpm error Invalid: lock file's content-disposition@0.5.4 does not satisfy content-disposition@1.0.0\nnpm error Invalid: lock file's cookie-signature@1.0.6 does not satisfy cookie-signature@1.2.2\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's finalhandler@1.3.1 does not satisfy finalhandler@2.1.0\nnpm error Invalid: lock file's fresh@0.5.2 does not satisfy fresh@2.0.0\nnpm error Invalid: lock file's merge-descriptors@1.0.3 does not satisfy merge-descriptors@2.0.0\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: qs@6.14.0 from lock file\nnpm error Missing: router@2.2.0 from lock file\nnpm error Invalid: lock file's send@0.19.0 does not satisfy send@1.2.0\nnpm error Invalid: lock file's serve-static@1.16.2 does not satisfy serve-static@2.2.0\nnpm error Missing: type-is@2.0.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Invalid: lock file's negotiator@0.6.3 does not satisfy negotiator@1.0.0\nnpm error Missing: reusify@1.1.0 from lock file\nnpm error Missing: flat-cache@3.2.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Invalid: lock file's @firebase/database-compat@1.0.8 does not satisfy @firebase/database-compat@2.0.11\nnpm error Invalid: lock file's @firebase/database-types@1.0.5 does not satisfy @firebase/database-types@1.0.16\nnpm error Missing: uuid@11.1.0 from lock file\nnpm error Invalid: lock file's @firebase/component@0.6.9 does not satisfy @firebase/component@0.6.18\nnpm error Invalid: lock file's @firebase/database@1.0.8 does not satisfy @firebase/database@1.0.20\nnpm error Missing: @firebase/database-types@1.0.15 from lock file\nnpm error Invalid: lock file's @firebase/logger@0.4.2 does not satisfy @firebase/logger@0.4.4\nnpm error Invalid: lock file's @firebase/util@1.10.0 does not satisfy @firebase/util@1.12.1\nnpm error Invalid: lock file's @firebase/app-check-interop-types@0.3.2 does not satisfy @firebase/app-check-interop-types@0.3.3\nnpm error Invalid: lock file's @firebase/auth-interop-types@0.2.3 does not satisfy @firebase/auth-interop-types@0.2.4\nnpm error Invalid: lock file's @firebase/app-types@0.9.2 does not satisfy @firebase/app-types@0.9.3\nnpm error Missing: @firebase/util@1.13.0 from lock file\nnpm error Missing: express@4.21.2 from lock file\nnpm error Missing: flatted@3.3.3 from lock file\nnpm error Missing: keyv@4.5.4 from lock file\nnpm error Missing: rimraf@3.0.2 from lock file\nnpm error Missing: type-fest@0.20.2 from lock file\nnpm error Missing: parent-module@1.0.1 from lock file\nnpm error Missing: resolve-from@4.0.0 from lock file\nnpm error Missing: is-extglob@2.1.1 from lock file\nnpm error Missing: json-buffer@3.0.1 from lock file\nnpm error Missing: prelude-ls@1.2.1 from lock file\nnpm error Missing: type-check@0.4.0 from lock file\nnpm error Missing: ansi-colors@4.1.3 from lock file\nnpm error Missing: browser-stdout@1.3.1 from lock file\nnpm error Missing: chokidar@3.6.0 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: diff@5.2.0 from lock file\nnpm error Missing: escape-string-regexp@4.0.0 from lock file\nnpm error Missing: find-up@5.0.0 from lock file\nnpm error Missing: glob@8.1.0 from lock file\nnpm error Missing: he@1.2.0 from lock file\nnpm error Missing: js-yaml@4.1.0 from lock file\nnpm error Missing: log-symbols@4.1.0 from lock file\nnpm error Missing: minimatch@5.1.6 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: serialize-javascript@6.0.2 from lock file\nnpm error Missing: supports-color@8.1.1 from lock file\nnpm error Missing: workerpool@6.5.1 from lock file\nnpm error Missing: yargs@16.2.0 from lock file\nnpm error Missing: yargs-parser@20.2.9 from lock file\nnpm error Missing: yargs-unparser@2.0.0 from lock file\nnpm error Missing: glob-parent@5.1.2 from lock file\nnpm error Missing: is-binary-path@2.1.0 from lock file\nnpm error Missing: readdirp@3.6.0 from lock file\nnpm error Missing: binary-extensions@2.3.0 from lock file\nnpm error Missing: is-unicode-supported@0.1.0 from lock file\nnpm error Missing: deep-is@0.1.4 from lock file\nnpm error Missing: fast-levenshtein@2.0.6 from lock file\nnpm error Missing: word-wrap@1.2.5 from lock file\nnpm error Missing: find-up-simple@1.0.1 from lock file\nnpm error Missing: read-pkg@9.0.1 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: @types/normalize-package-data@2.4.4 from lock file\nnpm error Missing: normalize-package-data@6.0.2 from lock file\nnpm error Missing: parse-json@8.3.0 from lock file\nnpm error Missing: type-fest@4.41.0 from lock file\nnpm error Missing: unicorn-magic@0.1.0 from lock file\nnpm error Missing: hosted-git-info@7.0.2 from lock file\nnpm error Missing: semver@7.7.2 from lock file\nnpm error Missing: validate-npm-package-license@3.0.4 from lock file\nnpm error Missing: lru-cache@10.4.3 from lock file\nnpm error Missing: glob@7.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: is-promise@4.0.0 from lock file\nnpm error Invalid: lock file's path-to-regexp@0.1.12 does not satisfy path-to-regexp@8.2.0\nnpm error Missing: queue-microtask@1.2.3 from lock file\nnpm error Missing: debug@4.4.1 from lock file\nnpm error Missing: mime-types@3.0.1 from lock file\nnpm error Missing: randombytes@2.1.0 from lock file\nnpm error Missing: is-arguments@1.2.0 from lock file\nnpm error Missing: is-generator-function@1.1.0 from lock file\nnpm error Missing: is-typed-array@1.1.15 from lock file\nnpm error Missing: which-typed-array@1.1.19 from lock file\nnpm error Missing: safe-regex-test@1.1.0 from lock file\nnpm error Missing: is-regex@1.2.1 from lock file\nnpm error Missing: spdx-correct@3.2.0 from lock file\nnpm error Missing: spdx-expression-parse@3.0.1 from lock file\nnpm error Missing: spdx-license-ids@3.0.21 from lock file\nnpm error Missing: spdx-exceptions@2.5.0 from lock file\nnpm error Missing: available-typed-arrays@1.0.7 from lock file\nnpm error Missing: call-bind@1.0.8 from lock file\nnpm error Missing: for-each@0.3.5 from lock file\nnpm error Missing: possible-typed-array-names@1.1.0 from lock file\nnpm error Missing: set-function-length@1.2.2 from lock file\nnpm error Missing: is-callable@1.2.7 from lock file\nnpm error Missing: define-data-property@1.1.4 from lock file\nnpm error Missing: has-property-descriptors@1.0.2 from lock file\nnpm error Missing: camelcase@6.3.0 from lock file\nnpm error Missing: decamelize@4.0.0 from lock file\nnpm error Missing: flat@5.0.2 from lock file\nnpm error Missing: is-plain-obj@2.1.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: uri-js@4.4.1 from lock file\nnpm error Missing: punycode@2.3.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: json-schema-traverse@0.4.1 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: iconv-lite@0.6.3 from lock file\nnpm error Missing: raw-body@3.0.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error Missing: media-typer@1.1.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: accepts@1.3.8 from lock file\nnpm error Missing: content-disposition@0.5.4 from lock file\nnpm error Missing: cookie-signature@1.0.6 from lock file\nnpm error Missing: finalhandler@1.3.1 from lock file\nnpm error Missing: fresh@0.5.2 from lock file\nnpm error Missing: merge-descriptors@1.0.3 from lock file\nnpm error Missing: path-to-regexp@0.1.12 from lock file\nnpm error Missing: send@0.19.0 from lock file\nnpm error Missing: serve-static@1.16.2 from lock file\nnpm error Missing: negotiator@0.6.3 from lock file\nnpm error Missing: encodeurl@1.0.2 from lock file\nnpm error Missing: mime@1.6.0 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: locate-path@6.0.0 from lock file\nnpm error Missing: argparse@2.0.1 from lock file\nnpm error Missing: p-locate@5.0.0 from lock file\nnpm error Missing: cliui@7.0.4 from lock file\nnpm error Missing: string-width@4.2.3 from lock file\nnpm error Missing: strip-ansi@6.0.1 from lock file\nnpm error Missing: wrap-ansi@7.0.0 from lock file\nnpm error Missing: emoji-regex@8.0.0 from lock file\nnpm error Missing: ansi-regex@5.0.1 from lock file\nnpm error Missing: index-to-position@1.1.0 from lock file\nnpm error Missing: minimatch@3.1.2 from lock file\nnpm error Missing: brace-expansion@1.1.12 from lock file\nnpm error Missing: ms@2.1.3 from lock file\nnpm error Missing: mime-db@1.54.0 from lock file\nnpm error\nnpm error Clean install a project\nnpm error\nnpm error Usage:\nnpm error npm ci\nnpm error\nnpm error Options:\nnpm error [--install-strategy <hoisted|nested|shallow|linked>] [--legacy-bundling]\nnpm error [--global-style] [--omit <dev|optional|peer> [--omit <dev|optional|peer> ...]]\nnpm error [--include <prod|dev|optional|peer> [--include <prod|dev|optional|peer> ...]]\nnpm error [--strict-peer-deps] [--foreground-scripts] [--ignore-scripts] [--no-audit]\nnpm error [--no-bin-links] [--no-fund] [--dry-run]\nnpm error [-w|--workspace <workspace-name> [-w|--workspace <workspace-name> ...]]\nnpm error [-ws|--workspaces] [--include-workspace-root] [--install-links]\nnpm error\nnpm error aliases: clean-install, ic, install-clean, isntall-clean\nnpm error\nnpm error Run \"npm help ci\" for more info\nnpm error A complete log of this run can be found in: /www-data-home/.npm/_logs/2025-08-05T20_51_55_108Z-debug-0.log. For more details see the logs at https://console.cloud.google.com/cloud-build/builds;region=us-central1/7769c2b6-63db-431a-b031-580c54391d1c?project=650977025157."
    },
    "status": 3,
    "code": 3
  }
}
[error] Error: There was an error deploying functions:
[error] - Error Failed to create function cleanupExpiredActiveChats in region us-central1
[error] - Error Failed to update function api in region us-central1
